var __extends=this&&this.__extends||function(a,b){function d(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},bananamania;!function(a){var b=function(){function a(){}return a.VERSION="1.2",a.ASSETS_BASE_URL="assets/",a.DEVELOPMENT=!1,a.HAS_SECRET_BUTTON=!1,a.SHOW_PHYSICS_BODIES=!1,a.GAME_WIDTH=480,a.GAME_HEIGHT=640,a.FAMOBI="FAMOBI",a.GAMEPIX="GAMEPIX",a.CLICKJOGOS="CLICKJOGOS",a.MARVEL_MEDIA="MARVEL MEDIA",a.GAME_DISTRIBUTION="GAME DISTR.",a.LAGGED="LAGGED.COM",a.NONE="SPONSOR",a.SPONSOR=a.LAGGED,a.ENGLISH="en",a.PORTUGUESE="pt",a.LANGUAGE=a.ENGLISH,a.EASY_STAGE="easy",a.MEDIUM_STAGE="medium",a.DIFFICULT_STAGE="difficult",a.FIRST_ROUND="first_round",a.SECOND_ROUND=" second_round",a.BANANA="banana",a.DYNAMITE="dynamite",a.PINK_BANANA="pink banana",a.B=0,a.D=1,a.P=2,a.BANANAS_NUMBER=32,a.PERCENTAGE_EDITED_LEVELS_EASY=.5,a.PERCENTAGE_EDITED_LEVELS_MEDIUM=.75,a.LAGGED_ACHIEVEMENT_100_BANANAS="banana_mania_a01",a.LAGGED_ACHIEVEMENT_250_BANANAS="banana_mania_a02",a.LAGGED_ACHIEVEMENT_500_BANANAS="banana_mania_a03",a.LAGGED_ACHIEVEMENT_50_EXPLOSIONS="banana_mania_a04",a.LAGGED_ACHIEVEMENT_1_LEVEL_PASSED="banana_mania_a05",a.LAGGED_ACHIEVEMENT_2_LEVEL_PASSED="banana_mania_a06",a.LAGGED_ACHIEVEMENT_3_LEVEL_PASSED="banana_mania_a07",a.LAGGED_ACHIEVEMENT_4_LEVEL_PASSED="banana_mania_a08",a.LAGGED_ACHIEVEMENT_5_LEVEL_PASSED="banana_mania_a09",a.LAGGED_ACHIEVEMENT_6_LEVEL_PASSED="banana_mania_a10",a.TOTAL_BANANAS_THROWN_KEY="bananamania_total_bananas",a.BEST_RESULT_NOT_PASSED_LEVEL_STATE_KEY="bananamania_best_result",a.STAGES_STATE_KEY="bananamania_stages",a.ATTEMPTS_KEY="bananamania_attempts",a.AUDIO_STATE_KEY="bananamania_audio",a.GAME_SESSIONS_KEY="bananamania_sessions",a.TIMES_STATS_CHECKED_KEY="bananamania_stats_checked",a.EXPLOSIONS_KEY="bananamania_explosions",a.TIME_SPENT_KEY="bananamania_time_spent",a.FIRST_MESSAGE_SHOWN_KEY="bananamania_first_message_shown",a.FINAL_REVELATION_KEY="bananamania_final_revelation",a.ACHIEVEMENTS_KEY="bananamania_achievements",a}();a.GameConstants=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function b(){if(b._instance)throw new Error("Error: Instantiation failed: Use AchievementsManager.getInstance() instead of new");b._instance=this}return b.getInstance=function(){return null===b._instance&&(b._instance=new b),b._instance},b.prototype.init=function(){var b=a.GameVars.getInstance().getLocalStorageData(a.GameConstants.ACHIEVEMENTS_KEY);b?this.achievementsData=JSON.parse(b):this.achievementsData={achievement100BananasThrown:!1,achievement250BananasThrown:!1,achievement500BananasThrown:!1,achievement50Explosions:!1,achievementFirstLevelFirstRoundPassed:!1,achievementSecondLevelFirstRoundPassed:!1,achievementThirdLevelFirstRoundPassed:!1,achievementFirstLevelSecondRoundPassed:!1,achievementSecondLevelSecondRoundPassed:!1,achievementThirdLevelSecondRoundPassed:!1}},b.prototype.levelEnded=function(){a.GameVars.getInstance().totalBananasThrown>=100&&!this.achievementsData.achievement100BananasThrown?(this.achievementsData.achievement100BananasThrown=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_100_BANANAS)):a.GameVars.getInstance().totalBananasThrown>=250&&!this.achievementsData.achievement250BananasThrown?(this.achievementsData.achievement250BananasThrown=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_250_BANANAS)):a.GameVars.getInstance().totalBananasThrown>=500&&!this.achievementsData.achievement500BananasThrown&&(this.achievementsData.achievement500BananasThrown=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_500_BANANAS)),a.GameVars.getInstance().explosions>=50&&!this.achievementsData.achievement50Explosions&&(this.achievementsData.achievement50Explosions=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_50_EXPLOSIONS));var b=a.GameVars.getInstance().stagesState;b[1]&&!this.achievementsData.achievementFirstLevelFirstRoundPassed?(this.achievementsData.achievementFirstLevelFirstRoundPassed=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_1_LEVEL_PASSED)):b[2]&&!this.achievementsData.achievementSecondLevelFirstRoundPassed?(this.achievementsData.achievementSecondLevelFirstRoundPassed=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_2_LEVEL_PASSED)):b[3]&&!this.achievementsData.achievementThirdLevelFirstRoundPassed?(this.achievementsData.achievementThirdLevelFirstRoundPassed=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_3_LEVEL_PASSED)):b[4]&&!this.achievementsData.achievementFirstLevelSecondRoundPassed?(this.achievementsData.achievementFirstLevelSecondRoundPassed=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_4_LEVEL_PASSED)):b[5]&&!this.achievementsData.achievementSecondLevelSecondRoundPassed?(this.achievementsData.achievementSecondLevelSecondRoundPassed=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_5_LEVEL_PASSED)):a.GameVars.getInstance().finalRevelationShown&&!this.achievementsData.achievementThirdLevelSecondRoundPassed&&(this.achievementsData.achievementThirdLevelSecondRoundPassed=!0,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.laggedAchievement(a.GameConstants.LAGGED_ACHIEVEMENT_6_LEVEL_PASSED)),a.GameVars.getInstance().setLocalStorageData(a.GameConstants.ACHIEVEMENTS_KEY,JSON.stringify(this.achievementsData))},b.prototype.laggedAchievement=function(a){var b=[];b.push(a),LaggedAPI.Achievements.save(b,function(a){a.success?console.log("10 goals scored achievement saved"):console.log(a.errormsg)})},b._instance=null,b}();a.AchievementsManager=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function a(){}return a.prototype.formatNumberForTextureAtlas=function(a){var b;return b=a>99?"0"+a:a>9?"00"+a:"000"+a},a.prototype.formatNumber=function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},a.prototype.getLocalStorageData=function(a){var b=localStorage.getItem(a);return null!==b?b:""},a.prototype.setLocalStorageData=function(a,b){localStorage.setItem(a,b)},a}();a.AGameVars=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){if(c._instance)throw new Error("Error: Instantiation failed: Use GameVars.getInstance() instead of new ");b.call(this),c._instance=this}return __extends(c,b),c.getInstance=function(){return null===c._instance&&(c._instance=new c),c._instance},c.prototype.init=function(b){this.game=b,this._gameOverFaceDirection=!0;var c=new Date;this._timePlayTimeChecked=Math.floor(c.getTime()/1e3);var d=this.getLocalStorageData(a.GameConstants.STAGES_STATE_KEY);""!==d?(this._stagesState=JSON.parse(d),this._previousStagesState=new Array,this._previousStagesState[0]=this._stagesState[0],this._previousStagesState[1]=this._stagesState[1],this._previousStagesState[2]=this._stagesState[2],this._previousStagesState[3]=this._stagesState[3],this._previousStagesState[4]=this._stagesState[4],this._previousStagesState[5]=this._stagesState[5]):(this._previousStagesState=[!0,!1,!1,!1,!1,!1],this._stagesState=[!0,!1,!1,!1,!1,!1]);var e=this.getLocalStorageData(a.GameConstants.BEST_RESULT_NOT_PASSED_LEVEL_STATE_KEY);""!==e?this._bestResultNotPassedLevel=parseInt(e):this._bestResultNotPassedLevel=0;var f=this.getLocalStorageData(a.GameConstants.TOTAL_BANANAS_THROWN_KEY);""!==f?this._totalBananasThrown=parseInt(f):this._totalBananasThrown=0;var g=this.getLocalStorageData(a.GameConstants.TIMES_STATS_CHECKED_KEY);""!==g?this._timesStatsChecked=parseInt(g):this._timesStatsChecked=0;var h=this.getLocalStorageData(a.GameConstants.EXPLOSIONS_KEY);""!==h?this._explosions=parseInt(h):this._explosions=0;var i=this.getLocalStorageData(a.GameConstants.TIME_SPENT_KEY);""!==i?this._timePlaying=parseInt(i):this._timePlaying=0;var j=this.getLocalStorageData(a.GameConstants.GAME_SESSIONS_KEY);""!==j?this._sessions=parseInt(j):this._sessions=0,this._sessions++,this.setLocalStorageData(a.GameConstants.GAME_SESSIONS_KEY,this._sessions.toString());var k=this.getLocalStorageData(a.GameConstants.FIRST_MESSAGE_SHOWN_KEY);""!==k?this._firstMessageShown=JSON.parse(k):this._firstMessageShown=!1;var l=this.getLocalStorageData(a.GameConstants.FINAL_REVELATION_KEY);""!==l?this._finalRevelationShown=JSON.parse(l):this._finalRevelationShown=!1;var m=this.getLocalStorageData(a.GameConstants.ATTEMPTS_KEY);""!==m?this._attempts=JSON.parse(m):this._attempts=[0,0,0,0,0,0],this._gameText=this.game.cache.getJSON("game_text")},c.prototype.resetGameState=function(){localStorage.clear(),this._previousStagesState=[!0,!1,!1,!1,!1,!1],this._stagesState=[!0,!1,!1,!1,!1,!1],this._totalBananasThrown=0,this._bestResultNotPassedLevel=0,this._timesStatsChecked=0,this._sessions=0,this._explosions=0,this._timePlaying=0,this._firstMessageShown=!1,this._attempts=[0,0,0,0,0,0]},c.prototype.saveGameState=function(){this.setLocalStorageData(a.GameConstants.BEST_RESULT_NOT_PASSED_LEVEL_STATE_KEY,this._bestResultNotPassedLevel.toString()),this.setLocalStorageData(a.GameConstants.STAGES_STATE_KEY,JSON.stringify(this._stagesState)),this.setLocalStorageData(a.GameConstants.TOTAL_BANANAS_THROWN_KEY,this._totalBananasThrown.toString()),this.setLocalStorageData(a.GameConstants.TIMES_STATS_CHECKED_KEY,this._timesStatsChecked.toString()),this.setLocalStorageData(a.GameConstants.EXPLOSIONS_KEY,this._explosions.toString()),this.setLocalStorageData(a.GameConstants.FIRST_MESSAGE_SHOWN_KEY,JSON.stringify(this._firstMessageShown)),this.setLocalStorageData(a.GameConstants.FIRST_MESSAGE_SHOWN_KEY,JSON.stringify(this._finalRevelationShown)),this.setLocalStorageData(a.GameConstants.ATTEMPTS_KEY,JSON.stringify(this._attempts));var b=new Date,c=b.getTime();c=Math.floor(c/1e3),this._timePlaying+=c-this._timePlayTimeChecked,this._timePlayTimeChecked=c,this.setLocalStorageData(a.GameConstants.TIME_SPENT_KEY,this._timePlaying.toString())},c.prototype.getLevelIndex=function(){var b;switch(c.getInstance().gameStage){case a.GameConstants.EASY_STAGE:b=0;break;case a.GameConstants.MEDIUM_STAGE:b=1;break;case a.GameConstants.DIFFICULT_STAGE:b=2}return c.getInstance().gameRound===a.GameConstants.SECOND_ROUND&&(b+=3),b=b<5?b+1:b},Object.defineProperty(c.prototype,"scaleY",{get:function(){return this._scaleY},set:function(a){this._scaleY=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"level",{get:function(){return this._level},set:function(a){this._level=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bananas",{get:function(){return this._bananas},set:function(a){this._bananas=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bananasThrown",{get:function(){return this._bananasThrown},set:function(a){this._bananasThrown=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"gameStage",{get:function(){return this._gameStage},set:function(a){this._gameStage=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"gameRound",{get:function(){return this._gameRound},set:function(a){this._gameRound=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"gameOver",{get:function(){return this._gameOver},set:function(a){this._gameOver=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isNextDynamite",{get:function(){return this._isNextDynamite},set:function(a){this._isNextDynamite=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bananaInScene",{get:function(){return this._bananaInScene},set:function(a){this._bananaInScene=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hitsFemaleGorilla",{get:function(){return this._hitsFemaleGorilla},set:function(a){this._hitsFemaleGorilla=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"hitsMaleGorilla",{get:function(){return this._hitsMaleGorilla},set:function(a){this._hitsMaleGorilla=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"stageData",{get:function(){return this._stageData},set:function(a){this._stageData=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"stagePassed",{get:function(){return this._stagePassed},set:function(a){this._stagePassed=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"stagesState",{get:function(){return this._stagesState},set:function(a){this._stagesState=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"totalBananasThrown",{get:function(){return this._totalBananasThrown},set:function(a){this._totalBananasThrown=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"bestResultNotPassedLevel",{get:function(){return this._bestResultNotPassedLevel},set:function(a){this._bestResultNotPassedLevel=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"timesStatsChecked",{get:function(){return this._timesStatsChecked},set:function(a){this._timesStatsChecked=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"explosions",{get:function(){return this._explosions},set:function(a){this._explosions=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"sessions",{get:function(){return this._sessions},set:function(a){this._sessions=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"timePlaying",{get:function(){return this._timePlaying},set:function(a){this._timePlaying=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"previousStagesState",{get:function(){return this._previousStagesState},set:function(a){this._previousStagesState=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"firstMessageShown",{get:function(){return this._firstMessageShown},set:function(a){this._firstMessageShown=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"finalRevelationShown",{get:function(){return this._finalRevelationShown},set:function(a){this._finalRevelationShown=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"attempts",{get:function(){return this._attempts},set:function(a){this._attempts=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"gameOverFaceDirection",{get:function(){return this._gameOverFaceDirection},set:function(a){this._gameOverFaceDirection=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"gameText",{get:function(){return this._gameText[a.GameConstants.LANGUAGE]},enumerable:!0,configurable:!0}),c._instance=null,c}(a.AGameVars);a.GameVars=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function b(){}return b.getInstance=function(){return null===b._instance&&(b._instance=new b),b._instance},b.prototype.init=function(b){this.game=b,this.onlyBananaLevel=new Array;for(var c=0;c<a.GameConstants.BANANAS_NUMBER;c++)this.onlyBananaLevel.push(0)},b.prototype.getLevel=function(){var b;if(a.GameVars.getInstance().editingLevels)return b=this.getEditedLevel();var d,c=Math.random();return a.GameVars.getInstance().gameStage===a.GameConstants.EASY_STAGE?d=a.GameConstants.PERCENTAGE_EDITED_LEVELS_EASY:a.GameVars.getInstance().gameStage===a.GameConstants.MEDIUM_STAGE&&(d=a.GameConstants.PERCENTAGE_EDITED_LEVELS_MEDIUM),c>d?b=this.onlyBananaLevel:(a.GameVars.getInstance().level=Math.floor(16*Math.random()),b=this.getEditedLevel()),b},b.prototype.getEditedLevel=function(){var b,c=this.game.cache.getJSON("stages");return a.GameVars.getInstance().gameStage===a.GameConstants.EASY_STAGE?b=c.easy[a.GameVars.getInstance().level]:a.GameVars.getInstance().gameStage===a.GameConstants.MEDIUM_STAGE&&(b=c.medium[a.GameVars.getInstance().level]),b},b._instance=null,b}();a.LevelFactory=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function b(){if(b._instance)throw new Error("Error: Instantiation failed: Use AudioManager.getInstance() instead of new.");b._instance=this;var c=a.GameVars.getInstance().getLocalStorageData(a.GameConstants.AUDIO_STATE_KEY);""!==c?this._isAudioMuted=JSON.parse(c):this._isAudioMuted=!1,this.loopPlayingKey=null,this.volume=1}return b.getInstance=function(){return null===b._instance&&(b._instance=new b),b._instance},b.prototype.init=function(a){this.game=a,this.audioSprite=this.game.add.audioSprite("audio_effects"),this._isAudioMuted&&(this.game.sound.mute=!0)},b.prototype.playSound=function(a,b){this.audioSprite.play(a,this.volume),b&&(this.loopPlayingKey=a)},b.prototype.stopSound=function(a,b,c){if(null!==a&&"undefined"!=typeof a){if(b){var d=this.audioSprite.get(a);d.fadeOut(850)}else this.audioSprite.stop(a);c&&(this.loopPlayingKey=null)}},Object.defineProperty(b.prototype,"isAudioMuted",{get:function(){return this._isAudioMuted},set:function(b){this._isAudioMuted=b,this._isAudioMuted?this.game.sound.mute=!0:this.game.sound.mute=!1,a.GameVars.getInstance().setLocalStorageData(a.GameConstants.AUDIO_STATE_KEY,JSON.stringify(this._isAudioMuted))},enumerable:!0,configurable:!0}),b._instance=null,b}();a.AudioManager=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(d){switch(b.call(this,d,null,"banana-thrower",!1),this.stopped=!1,this.tweening=!1,this.i=0,this.ccw=!0,this.outerDiskRotationDirection=1,this.tweenArrayLength=c.TWEEN_ARRAY_SCALE_X.length-1,this.pinkHalo=new Phaser.Image(this.game,240,320,"texture_atlas_5","pink_halo.png"),this.pinkHalo.anchor.set(.5,1.1),this.pinkHalo.visible=!1,this.add(this.pinkHalo),this.rotatingItems=new Phaser.Group(this.game),this.rotatingItems.x=240,this.rotatingItems.y=320,this.rotatingItems.scale.y=a.GameVars.getInstance().scaleY,this.add(this.rotatingItems),a.GameVars.getInstance().gameRound===a.GameConstants.FIRST_ROUND?this.deltaAngle=c.THROWER_MIN_ANG_SPEED:this.deltaAngle=c.THROWER_SECOND_ROUND_SPEED,a.GameVars.getInstance().gameStage===a.GameConstants.MEDIUM_STAGE&&(this.deltaAngle=-this.deltaAngle),this.difficultMode=!1,a.GameVars.getInstance().gameStage){case a.GameConstants.EASY_STAGE:this.launcherTextureName="launcher_easy.png";break;case a.GameConstants.MEDIUM_STAGE:this.launcherTextureName="launcher_medium.png";break;case a.GameConstants.DIFFICULT_STAGE:this.difficultMode=!0,this.launcherTextureName="launcher_hard.png",this.outerDisk=new Phaser.Sprite(this.game,0,0,"texture_atlas_1","outer-disk.png"),this.outerDisk.anchor.set(.5),this.rotatingItems.add(this.outerDisk);break;default:this.launcherTextureName="launcher_easy.png"}this.bananasContainer=new Phaser.Group(this.game),this.bananasContainer.x=240,this.bananasContainer.y=320,this.add(this.bananasContainer),this.bananasContainer.createMultiple(5,"texture_atlas_1","banana.png");for(var e=0;e<this.bananasContainer.length;e++){var f=this.bananasContainer.getChildAt(e);f.name=a.GameConstants.BANANA,this.game.physics.enable(f,Phaser.Physics.ARCADE),f.anchor.set(.5),f.body.setSize(48,80,-2,-2),f.events.onOutOfBounds.add(a.LevelManager.getInstance().onBananaOutOfBounds,a.LevelManager.getInstance()),f.checkWorldBounds=!0,f.outOfBoundsKill=!0,f.gorillaHit=!1}this.game.physics.enable(this.bananasContainer,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.dynamiteSignal=new Phaser.Image(this.game,0,0,"texture_atlas_1","dynamite-signal.png"),this.dynamiteSignal.anchor.set(.5),this.dynamiteSignal.visible=!1,this.rotatingItems.add(this.dynamiteSignal),this.thrower=new Phaser.Sprite(this.game,0,0,"texture_atlas_1",this.launcherTextureName),this.rotatingItems.add(this.thrower),this.thrower.scale.set(0),this.thrower.anchor.set(.5)}return __extends(c,b),c.prototype.init=function(){this.game.add.tween(this.thrower.scale).to({x:1,y:1},750,Phaser.Easing.Elastic.Out,!0)},c.prototype.update=function(){b.prototype.update.call(this),this.stopped||(c.angle-=this.deltaAngle,this.thrower.angle=c.angle,this.difficultMode&&(this.outerDisk.angle+=this.outerDiskRotationDirection*c.OUTER_DISK_ANG_SPEED),this.tweening&&(this.thrower.scale.x=c.TWEEN_ARRAY_SCALE_X[this.i],this.thrower.scale.y=c.TWEEN_ARRAY_SCALE_Y[this.i],this.i++===this.tweenArrayLength&&(this.i=0,this.tweening=!1,this.thrower.scale.x=1,this.thrower.scale.x=1)))},c.prototype.stopSpinning=function(){this.stopped=!0,this.game.add.tween(this).to({alpha:0},500,Phaser.Easing.Cubic.Out,!0,350),this.dynamiteSignalTween&&(this.dynamiteSignalTween.pendingDelete=!0)},c.prototype.onLevelPassed=function(){this.dynamiteSignal.visible&&(this.dynamiteSignal.visible=!1),this.dynamiteSignalTween&&(this.dynamiteSignalTween.pendingDelete=!0),this.game.add.tween(this.thrower).to({alpha:0},600,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.thrower.scale).to({x:3,y:1.25},600,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.stopped=!0},this)},c.prototype.throwDeterminedItem=function(b){this.applyTweenToThrower();var d=Math.cos((c.angle-90)*Math.PI/180),e=Math.sin((c.angle-90)*Math.PI/180),f=55*d,g=55*e,h=this.bananasContainer.getFirstExists(!1);b===a.GameConstants.DYNAMITE?(h.name=a.GameConstants.DYNAMITE,h.frameName="dynamite.png",h.body.setSize(52,110,-5,-2),this.thrower.frameName=this.launcherTextureName,this.dynamiteSignal.visible=!1,this.dynamiteSignalTween&&(this.dynamiteSignalTween.pendingDelete=!0)):b===a.GameConstants.PINK_BANANA?(h.name=a.GameConstants.PINK_BANANA,h.frameName="pink-banana.png",h.body.setSize(48,80,-2,-2),this.pinkHalo.angle=this.thrower.angle,this.pinkHalo.visible=!0,this.game.time.events.add(270,function(){this.pinkHalo.visible=!1},this)):(h.name=a.GameConstants.BANANA,h.frameName="banana.png",h.body.setSize(48,80,-2,-2)),h.reset(f,g),h.body.reset(f,g);var i=c.BANANA_SPEED*d,j=c.BANANA_SPEED*e;h.body.velocity.setTo(i,j),a.GameVars.getInstance().gameRound===a.GameConstants.SECOND_ROUND&&this.modifySpinningDirection(),a.AudioManager.getInstance().playSound("Platano")},c.prototype.throwUndeterminedItem=function(){var b,c=this.outerDisk.angle>0?this.outerDisk.angle:360+this.outerDisk.angle,d=this.thrower.angle>0?this.thrower.angle:360+this.thrower.angle,e=d-c>0?d-c:360+d-c;b=e<90?a.GameConstants.BANANA:e<180?a.GameConstants.DYNAMITE:e<270?a.GameConstants.BANANA:a.GameConstants.PINK_BANANA,this.throwDeterminedItem(b)},c.prototype.onNextDynamite=function(){this.thrower.frameName="launcher_explosive.png",this.dynamiteSignal.visible=!0,this.dynamiteSignal.scale.setTo(.78,.78),this.dynamiteSignalTween=this.game.add.tween(this.dynamiteSignal.scale).to({x:1.073,y:1.073},250,Phaser.Easing.Cubic.Out,!0,0,-1,!0)},c.prototype.increaseSpeed=function(){Math.abs(this.deltaAngle)<c.THROWER_MAX_ANG_SPEED&&(this.deltaAngle=this.deltaAngle*c.THROWER_ANG_SPEED_FACTOR)},c.prototype.resetBanana=function(a,b){b?(a.gorillaHit=!1,a.kill()):this.game.time.events.add(215,function(){a.gorillaHit=!1,a.kill()},this,a)},c.prototype.modifySpinningDirection=function(){this.ccw?Math.random()>.625&&a.GameVars.getInstance().bananas<30&&(this.game.add.tween(this).to({deltaAngle:-c.THROWER_SECOND_ROUND_SPEED},1200,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.outerDiskRotationDirection=-1,this.ccw=!1},this),this.onSpinningDirectionChanged()):Math.random()>.625&&(this.game.add.tween(this).to({deltaAngle:c.THROWER_SECOND_ROUND_SPEED},1200,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.outerDiskRotationDirection=1,this.ccw=!0},this),this.onSpinningDirectionChanged())},c.prototype.applyTweenToThrower=function(){this.tweening||(this.tweening=!0,this.thrower.scale.setTo(.7,1.3))},c.prototype.onSpinningDirectionChanged=function(){this.thrower.blendMode=3,this.game.time.events.loop(350,function(){this.thrower.blendMode=0},this)},c.angle=0,c.BANANA_SPEED=485,c.THROWER_MIN_ANG_SPEED=1.75,c.THROWER_MAX_ANG_SPEED=10,c.THROWER_SECOND_ROUND_SPEED=12,c.THROWER_ANG_SPEED_FACTOR=1.075,c.OUTER_DISK_ANG_SPEED=2,c.TWEEN_ARRAY_SCALE_X=[.7,.7,.7,.7,.7,.7,.769,.854,.938,1.006,1.053,1.077,1.082,1.072,1.054,1.032,1.012,.996,.985,.98,.98,.983,.988,.993,.998,1.002,1.004,1.005,1.005,1.004,1.003,1.001,1,.999,.999,.999,.999,.999,.999,1,1,1,1,1,1],c.TWEEN_ARRAY_SCALE_Y=[1.3,1.3,1.3,1.3,1.3,1.3,1.231,1.146,1.062,.994,.947,.923,.918,.928,.946,.968,.988,1.004,1.015,1.02,1.02,1.017,1.012,1.007,1.002,.998,.996,.995,.995,.996,.997,.999,1,1.001,1.001,1.001,1.001,1.001,1.001,1,1,1,1,1,1],c}(Phaser.Group);a.BananaThrower=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c,d){switch(b.call(this,c,null,"HUD",!1),this.bananaLabelContainer=new Phaser.Group(this.game),this.bananaLabelContainer.x=0,this.bananaLabelContainer.y=0,d.thrower.addChild(this.bananaLabelContainer),a.GameVars.getInstance().gameStage){case a.GameConstants.EASY_STAGE:this.fontName="victor-pixel-easy";break;case a.GameConstants.MEDIUM_STAGE:this.fontName="victor-pixel-medium";break;case a.GameConstants.DIFFICULT_STAGE:this.fontName="victor-pixel-difficult";break;default:this.fontName="victor-pixel-easy"}this.bananaLabel=new Phaser.BitmapText(this.game,0,2,this.fontName,"",48),this.bananaLabelContainer.add(this.bananaLabel),a.GameConstants.DEVELOPMENT&&this.addFramesCounter()}return __extends(c,b),c.prototype.init=function(){this.bananaLabel.text=""+a.GameVars.getInstance().bananas,this.bananaLabel.updateText(),this.bananaLabel.x=c.COUNTER_PX-this.bananaLabel.width/2,this.bananaLabel.y=c.COUNTER_PY-this.bananaLabel.height/2},c.prototype.update=function(){b.prototype.update.call(this),a.GameConstants.DEVELOPMENT&&(this.fpsLabel.text=""+this.game.time.fps)},c.prototype.onBananaThrown=function(){this.bananaLabel.text=""+a.GameVars.getInstance().bananas,this.bananaLabel.updateText(),this.bananaLabel.x=c.COUNTER_PX-this.bananaLabel.width/2,this.bananaLabel.y=c.COUNTER_PY-this.bananaLabel.height/2},c.prototype.onNextDynamite=function(){this.bananaLabel.font="victor-pixel-dynamite",this.bananaLabel.updateText()},c.prototype.onNextBanana=function(){this.bananaLabel.font=this.fontName,this.bananaLabel.updateText()},c.prototype.addFramesCounter=function(){this.fpsLabel=new Phaser.Text(this.game,10,this.game.world.height-35,"0",{font:"25px Arial",fill:"#000000",align:"left"}),this.add(this.fpsLabel)},c.COUNTER_PX=-6,c.COUNTER_PY=-8,c}(Phaser.Group);a.HUD=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(d,e){b.call(this,d,null,"gorilla",!1),this.gorillaType=e,this.name=e,this.tweening=!1,this.state=c.IDLE_STATE,this.cycleTween=null,this.currentScale=1,this.tremble=!1,this.shrunken=!1,a.GameVars.getInstance().gameStage===a.GameConstants.MEDIUM_STAGE||a.GameVars.getInstance().gameStage===a.GameConstants.DIFFICULT_STAGE?this.gorillasMoving=!0:this.gorillasMoving=!1,this.pinkBananaSmokeEffect=new a.PinkBananaSmokeEffect(this.game),this.add(this.pinkBananaSmokeEffect),this.shadow=new Phaser.Image(this.game,0,-50,"texture_atlas_1","gorilla_shadow.png"),this.shadow.anchor.setTo(.5,.5),this.add(this.shadow),this.rays=new Phaser.Image(this.game,0,-120,"texture_atlas_5","celestial_rays.png"),this.rays.blendMode=3,this.rays.anchor.set(.5),this.rays.visible=!1,this.add(this.rays),this.gorillaBody=new Phaser.Sprite(this.game,0,0,"texture_atlas_1","gorilla_body.png"),this.gorillaBody.name="gorilla-body",this.gorillaBody.anchor.set(.5,1),this.add(this.gorillaBody),this.gorillaType===c.MALE?(this.y=c.MALE_PY,this.burntTextureName="gorilla-male-burnt.png"):(this.y=c.FEMALE_PY,this.burntTextureName="gorilla-female-burnt.png"),this.addCollisionBodies(),this.gorillasMoving?(this.gorillaType===c.MALE?(this.rotationSign=1,this.x=c.LEFT_LIMIT,this.movingToTheRight=!0):(this.rotationSign=-1,this.x=c.RIGHT_LIMIT,this.movingToTheRight=!1),a.GameVars.getInstance().gameRound===a.GameConstants.FIRST_ROUND?this.cycleTime=2e3:this.cycleTime=650,this.leftLimit=c.LEFT_LIMIT,this.rightLimit=c.RIGHT_LIMIT,this.game.time.events.add(800,this.startMoving,this),this.framesCounter=0,this.tiltFrames=c.TILT_FRAMES_NORMAL_SIZE):this.x=240,this.head=new a.GorillaHead(this.game,this),this.add(this.head)}return __extends(c,b),c.prototype.update=function(){b.prototype.update.call(this),this.gorillasMoving&&(this.framesCounter++,this.framesCounter>this.tiltFrames&&(this.framesCounter=0,this.angle=1*this.rotationSign,this.rotationSign=-this.rotationSign)),this.tremble&&!this.shrunken&&(this.scale.y=Math.random()>.8?1.015:1)},c.prototype.hit=function(){this.tweening||this.state===c.SCARED_STATE||0===a.GameVars.getInstance().bananas||(this.state=c.EATING_STATE,this.tweening=!0,this.head.hit(),this.game.add.tween(this.scale).to({x:1.15*this.currentScale,y:1.08*this.currentScale},75,Phaser.Easing.Cubic.Out,!0,0,0,!0).onComplete.add(function(){this.tweening=!1},this),a.AudioManager.getInstance().playSound("Impacto_platano"))},c.prototype.changeDisguise=function(b){var d=this.gorillaType===c.MALE?a.GameVars.getInstance().hitsMaleGorilla.toString():a.GameVars.getInstance().hitsFemaleGorilla.toString(),e=this.gorillaType===c.MALE?"_B.png":"_A.png";this.gorillaBody.frameName=d+e,this.gorillaBody.blendMode=3;var f=120;b?(this.rays.frameName="celestial_pink_rays.png",this.rays.scale.set(2,1),this.rays.alpha=1,f=300,this.shrunken||this.pinkBananaSmokeEffect.emit()):(this.rays.frameName="celestial_rays.png",this.rays.scale.set(1),this.rays.alpha=.85,f=120),this.rays.visible=!0,this.game.add.tween(this.rays).to({alpha:0},f,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.rays.visible=!1,this.gorillaBody.blendMode=0},this)},c.prototype.increaseHorizontalSpeed=function(){this.cycleTime=.96*this.cycleTime},c.prototype.shrink=function(){this.shrunken=!0,this.currentScale=c.SHRUNKEN_SCALE,this.tiltFrames=c.TILT_FRAMES_SHRUNKEN_SIZE,this.game.add.tween(this.scale).to({x:this.currentScale,y:this.currentScale},700,Phaser.Easing.Bounce.In,!0,150),this.head.shrink();var b=this.gorillaType===c.MALE?c.SHRUNKEN_MALE_PY:c.SHRUNKEN_FEMALE_PY;this.game.add.tween(this).to({y:b},400,Phaser.Easing.Cubic.Out,!0,400),this.leftLimit=c.LEFT_LIMIT_SHRUNKEN,this.rightLimit=c.RIGHT_LIMIT_SHRUNKEN,this.gorillaType===c.MALE?(this.gorillaCollisionBodyLeft.body.setSize(42*c.SHRUNKEN_SCALE,102*c.SHRUNKEN_SCALE,0,0),this.gorillaCollisionBodyRight.body.setSize(42*c.SHRUNKEN_SCALE,102*c.SHRUNKEN_SCALE,0,0),this.gorillaBody.body.setSize(160*c.SHRUNKEN_SCALE,180*c.SHRUNKEN_SCALE,96,130)):(this.gorillaCollisionBodyLeft.body.setSize(42*c.SHRUNKEN_SCALE,102*c.SHRUNKEN_SCALE,0,0),this.gorillaCollisionBodyRight.body.setSize(42*c.SHRUNKEN_SCALE,102*c.SHRUNKEN_SCALE,0,0),this.gorillaBody.body.setSize(160*c.SHRUNKEN_SCALE,180*c.SHRUNKEN_SCALE,96,130)),a.AudioManager.getInstance().playSound("Hechizo_encogimiento")},c.prototype.stretch=function(){this.shrunken=!1,this.currentScale=1,this.tiltFrames=c.TILT_FRAMES_NORMAL_SIZE,this.game.add.tween(this.scale).to({x:this.currentScale,y:this.currentScale},700,Phaser.Easing.Bounce.Out,!0,150);var b=this.gorillaType===c.MALE?c.MALE_PY:c.FEMALE_PY;this.game.add.tween(this).to({y:b},400,Phaser.Easing.Cubic.Out,!0,500),this.head.stretch(),this.leftLimit=c.LEFT_LIMIT,this.rightLimit=c.RIGHT_LIMIT,this.gorillaCollisionBodyLeft.body.setSize(42,102,0,0),this.gorillaCollisionBodyRight.body.setSize(42,102,0,0),this.gorillaType===c.MALE?this.gorillaBody.body.setSize(160,162,68,60):this.gorillaBody.body.setSize(180,80,60,80),a.AudioManager.getInstance().playSound("Hechizo_recuperacion")},c.prototype.disappear=function(){this.state!==c.IDLE_STATE&&this.state!==c.EATING_STATE||this.head.bananaOutOfBoundsAnimation(),this.tremble&&this.stopTrembling();var a;this.gorillasMoving?(this.gorillasMoving&&this.stopMoving(),a=this.movingToTheRight?680:-200):a=this.name===c.MALE?680:-200,this.game.add.tween(this).to({x:a},800,Phaser.Easing.Cubic.In,!0,450)},c.prototype.onLevelPassed=function(){this.state=c.CELEBRATING_STATE,
this.gorillasMoving&&this.stopMoving(),this.head.onLevelPassed()},c.prototype.onNextBanana=function(){this.tremble=!1,this.head.idle(),this.state=c.IDLE_STATE},c.prototype.checkGorillaState=function(){a.GameVars.getInstance().isNextDynamite?(this.state=c.SCARED_STATE,this.tremble=!0,this.head.scare()):this.state===c.SCARED_STATE&&(this.state=c.IDLE_STATE,this.tremble=!1,this.head.idle())},c.prototype.stopTrembling=function(){this.tremble=!1,this.scale.y=this.currentScale},c.prototype.stopMoving=function(){this.gorillasMoving=!1,this.angle=0,null!==this.cycleTween&&(this.cycleTween.stop(!1),this.cycleTween.pendingDelete=!0)},c.prototype.freezeScared=function(){this.state===c.SCARED_STATE?this.head.freezeScared():this.head.scareAfterExplosion(),this.state=c.FROZEN_STATE,this.game.time.events.add(800,function(){var a=new Phaser.Sprite(this.game,0,0,"texture_atlas_5","gorilla_shit_0001.png");a.animations.add("shitting",Phaser.Animation.generateFrameNames("gorilla_shit_",1,13,".png",4),14,!1),a.anchor.set(.5,1),a.play("shitting",12),this.addAt(a,1),this.head.addSweat()},this)},c.prototype.explode=function(){this.state=c.EXPLODED_STATE,this.exploded=!0,this.explosion=new Phaser.Sprite(this.game,0,-130,"texture_atlas_1","explosion0001.png"),this.explosion.anchor.set(.5),this.explosion.animations.add("explode",Phaser.Animation.generateFrameNames("explosion",1,25,".png",4),20,!1),this.addChild(this.explosion),this.explosion.animations.play("explode",20,!1,!0),this.game.time.events.add(160,this.onDynamiteExploded,this),a.AudioManager.getInstance().playSound("explosion")},c.prototype.onDynamiteExploded=function(){this.head.explode();var a=new Phaser.Image(this.game,0,0,"texture_atlas_1","burnt_gorilla_body.png");a.anchor.setTo(.5,1),this.addChild(a)},c.prototype.addCollisionBodies=function(){this.gorillaType===c.MALE?(this.game.physics.enable(this.gorillaBody,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.gorillaBody.body.setSize(160,162,68,60),this.gorillaCollisionBodyLeft=new Phaser.Sprite(this.game,-106,-160),this.gorillaCollisionBodyLeft.anchor.set(.5),this.game.physics.enable(this.gorillaCollisionBodyLeft,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.gorillaCollisionBodyLeft.body.setSize(42,102,0,0),this.gorillaCollisionBodyLeft.name="gorilla-body-left",this.addChild(this.gorillaCollisionBodyLeft),this.gorillaCollisionBodyRight=new Phaser.Sprite(this.game,94,-160),this.gorillaCollisionBodyRight.anchor.set(.5),this.game.physics.enable(this.gorillaCollisionBodyRight,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.gorillaCollisionBodyRight.body.setSize(42,102,0,0),this.gorillaCollisionBodyRight.name="gorilla-body-right",this.addChild(this.gorillaCollisionBodyRight)):(this.game.physics.enable(this.gorillaBody,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.gorillaBody.body.setSize(180,80,60,80),this.gorillaCollisionBodyLeft=new Phaser.Sprite(this.game,-108,-140),this.gorillaCollisionBodyLeft.anchor.set(.5),this.game.physics.enable(this.gorillaCollisionBodyLeft,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.gorillaCollisionBodyLeft.body.setSize(36,60,0,0),this.gorillaCollisionBodyLeft.name="gorilla-body-left",this.addChild(this.gorillaCollisionBodyLeft),this.gorillaCollisionBodyRight=new Phaser.Sprite(this.game,108,-140),this.gorillaCollisionBodyRight.anchor.set(.5),this.game.physics.enable(this.gorillaCollisionBodyRight,Phaser.Physics.ARCADE,a.GameConstants.SHOW_PHYSICS_BODIES),this.gorillaCollisionBodyRight.body.setSize(36,60,0,0),this.gorillaCollisionBodyRight.name="gorilla-body-right",this.addChild(this.gorillaCollisionBodyRight))},c.prototype.startMoving=function(){var a=this.gorillaType===c.MALE?this.rightLimit:this.leftLimit;this.cycleTween=this.game.add.tween(this).to({x:a},this.cycleTime,Phaser.Easing.Linear.None,!0),this.cycleTween.onComplete.add(this.swapDirection,this)},c.prototype.swapDirection=function(){this.movingToTheRight=!this.movingToTheRight;var a=this.movingToTheRight?this.rightLimit:this.leftLimit;this.cycleTween=this.game.add.tween(this).to({x:a},this.cycleTime,Phaser.Easing.Linear.None,!0),this.cycleTween.onComplete.add(this.swapDirection,this)},c.MALE="male",c.FEMALE="female",c.IDLE_STATE=0,c.EATING_STATE=1,c.SCARED_STATE=2,c.EXPLODED_STATE=3,c.FROZEN_STATE=4,c.CELEBRATING_STATE=5,c.LEFT_LIMIT=120,c.RIGHT_LIMIT=360,c.LEFT_LIMIT_SHRUNKEN=80,c.RIGHT_LIMIT_SHRUNKEN=400,c.MALE_PY=228,c.FEMALE_PY=668,c.SHRUNKEN_MALE_PY=175,c.SHRUNKEN_FEMALE_PY=645,c.TILT_FRAMES_NORMAL_SIZE=12,c.TILT_FRAMES_SHRUNKEN_SIZE=8,c.SHRUNKEN_SCALE=.6,c}(Phaser.Group);a.Gorilla=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function b(a){this.game=a,this.endLevel=!1}return b.prototype.init=function(a){this.backgroundSprite=a,this.backgroundSprite.inputEnabled=!0,this.backgroundSprite.input.priorityID=0,this.backgroundSprite.events.onInputDown.add(this.onClickInGameScene,this)},b.prototype.destroy=function(){this.backgroundSprite.events.onInputDown.remove(this.onClickInGameScene,this)},b.prototype.onEndLevel=function(){this.endLevel=!0},b.prototype.onClickInGameScene=function(){this.endLevel||a.GameVars.getInstance().bananaInScene||a.LevelManager.getInstance().onClickInGameScene()},b}();a.GameController=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(a){function b(b){a.call(this,b,null,"background manager",!1),this.blendingModeCounter=0,this.blendingTimer=null;var c=this.getBackgroundID(),d="bg_0"+c.toString()+".png";this.backSprite=new Phaser.Sprite(this.game,0,0,"texture_atlas_4",d),this.backSprite.visible=!1,this.add(this.backSprite),this.backgroundSprite=new Phaser.Sprite(this.game,0,0,"texture_atlas_4",d),this.add(this.backgroundSprite)}return __extends(b,a),b.prototype.onLevelPassed=function(){this.backSprite.visible=!0,this.game.time.events.add(400,function(){this.blendingTimer=this.game.time.events.loop(75,this.changeBackgroundBlendMode,this)},this)},b.prototype.deactivateAnimation=function(){this.blendingTimer.pendingDelete=!0,this.backgroundSprite.blendMode=0,this.backSprite.visible=!1},b.prototype.changeBackgroundBlendMode=function(){this.blendingModeCounter=this.blendingModeCounter<3?this.blendingModeCounter+1:0,this.backgroundSprite.blendMode=this.blendingModeCounter},b.prototype.getBackgroundID=function(){for(var c,a=b.lastBackgroundID;a===b.lastBackgroundID;)c=Math.random(),a=c>.75?1:c>.5?2:c>.25?3:4;return b.lastBackgroundID=a,a},b.lastBackgroundID=null,b}(Phaser.Group);a.BackgroundManager=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function b(){this.laggedAdsCounter=0}return b.getInstance=function(){return null===b._instance&&(b._instance=new b),b._instance},b.prototype.setGameStage=function(b,c){a.GameVars.getInstance().gameStage=b,a.GameVars.getInstance().gameRound=c,a.GameVars.getInstance().previousStagesState[0]=a.GameVars.getInstance().stagesState[0],a.GameVars.getInstance().previousStagesState[1]=a.GameVars.getInstance().stagesState[1],a.GameVars.getInstance().previousStagesState[2]=a.GameVars.getInstance().stagesState[2],a.GameVars.getInstance().previousStagesState[3]=a.GameVars.getInstance().stagesState[3],a.GameVars.getInstance().previousStagesState[4]=a.GameVars.getInstance().stagesState[4],a.GameVars.getInstance().previousStagesState[5]=a.GameVars.getInstance().stagesState[5]},b.prototype.onStageNotPassed=function(){var b=a.GameConstants.BANANAS_NUMBER-a.GameVars.getInstance().bananas-1;b>a.GameVars.getInstance().bestResultNotPassedLevel&&(a.GameVars.getInstance().bestResultNotPassedLevel=b);var c=a.GameVars.getInstance().getLevelIndex();a.GameVars.getInstance().attempts[c]++,a.AchievementsManager.getInstance().levelEnded(),a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.showLaggedAds(),a.GameVars.getInstance().saveGameState()},b.prototype.onStagePassed=function(){var b=a.GameVars.getInstance().getLevelIndex();a.GameVars.getInstance().stagesState[b]=!0,a.GameVars.getInstance().bestResultNotPassedLevel=0,a.AchievementsManager.getInstance().levelEnded(),a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.showLaggedAds(),a.GameVars.getInstance().saveGameState()},b.prototype.hasCurrentLevelBeenPassed=function(){var b=a.GameVars.getInstance().getLevelIndex();return a.GameVars.getInstance().stagesState[b]},b.prototype.onEndLevelLayerMounted=function(){var b=a.GameConstants.BANANAS_NUMBER-a.GameVars.getInstance().bananas-1,c=a.GameVars.getInstance().getLevelIndex(),d=a.GameVars.getInstance().attempts[c];a.GameConstants.SPONSOR!==a.GameConstants.GAMEPIX||a.GameVars.getInstance().stagePassed||GamePix.game.ping("game_over",{score:b,level:a.GameVars.getInstance().gameStage+"-"+a.GameVars.getInstance().gameRound}),a.GameConstants.SPONSOR===a.GameConstants.GAMEPIX&&a.GameVars.getInstance().stagePassed&&GamePix.game.ping("level_complete",{score:32,level:a.GameVars.getInstance().gameStage+"-"+a.GameVars.getInstance().gameRound,attempts:d}),a.GameConstants.SPONSOR===a.GameConstants.GAME_DISTRIBUTION&&gdApi.showBanner()},b.prototype.showLaggedAds=function(){this.laggedAdsCounter%4===0&&("undefined"==typeof prerollStart?console.log("skip ad, prerollStart not found"):(a.Game.currentInstance.sound.mute=!0,LaggedAPI.APIAds.show("interstitial","bananamania","bananamania-game.jpg",function(b){b.success?(console.log("ad done"),a.Game.currentInstance.sound.mute=!1):(console.log("ad error, continue"),a.Game.currentInstance.sound.mute=!1)}))),this.laggedAdsCounter++},b._instance=null,b}();a.GameModel=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(a){b.call(this,a,null,"game-over-layer",!1),this.layerBeingShown=!1;var c=new Phaser.Sprite(this.game,0,0,this.game.cache.getBitmapData("fade_in_out"));c.scale.setTo(7.5,10),c.alpha=0,this.add(c),this.game.add.tween(c).to({alpha:.85},1500,Phaser.Easing.Cubic.Out,!0,600);var d;d=this.checkShowMysticalMessage()?4500:150,this.game.time.events.add(d,this.showSceneItems,this)}return __extends(c,b),c.prototype.showSceneItems=function(){this.endLevelColumns=new a.EndLevelColumns(this.game),this.add(this.endLevelColumns),a.GameVars.getInstance().stagePassed||this.addScore(),this.addButtons()},c.prototype.addScore=function(){var b=new a.EndScore(this.game);this.add(b);var c=a.GameVars.getInstance().gameText;if(!a.GameModel.getInstance().hasCurrentLevelBeenPassed()){var d=new Phaser.BitmapText(this.game,10,10,"victor-white",c.GAME_BEST+a.GameVars.getInstance().bestResultNotPassedLevel,45);d.alpha=0,this.add(d),this.game.add.tween(d).to({alpha:1},1e3,Phaser.Easing.Cubic.Out,!0)}},c.prototype.addButtons=function(){this.sideButtonsContainer=new Phaser.Group(this.game),this.add(this.sideButtonsContainer),this.sideButtonsContainer.x=-100,this.audioOnButton=new Phaser.Button(this.game,0,418,"texture_atlas_2",this.onClickMusicOn,this,"music_on_off.png","music_on_on.png","music_on_off.png"),this.audioOnButton.forceOut=!0,this.sideButtonsContainer.add(this.audioOnButton),this.audioOffButton=new Phaser.Button(this.game,0,418,"texture_atlas_2",this.onClickMusicOff,this,"music_off_off.png","music_off_on.png","music_off_off.png"),this.audioOffButton.forceOut=!0,this.sideButtonsContainer.add(this.audioOffButton),a.AudioManager.getInstance().isAudioMuted?this.audioOnButton.visible=!1:this.audioOffButton.visible=!1,this.game.add.tween(this.sideButtonsContainer).to({x:0},450,Phaser.Easing.Cubic.Out,!0,750);var b=new Phaser.Button(this.game,0,490,"texture_atlas_2",this.onClickStats,this,"stats_on.png","stats_off.png","stats_on.png");b.forceOut=!0,this.sideButtonsContainer.add(b);var c=new Phaser.Button(this.game,0,562,"texture_atlas_2",this.onClickHome,this,"button_home_on.png","button_home_off.png","button_home_on.png");c.forceOut=!0,this.sideButtonsContainer.add(c)},c.prototype.onClickMusicOn=function(){this.layerBeingShown||(this.audioOnButton.visible=!1,this.audioOffButton.visible=!0,a.AudioManager.getInstance().isAudioMuted=!0)},c.prototype.onClickMusicOff=function(){this.layerBeingShown||(this.audioOnButton.visible=!0,this.audioOffButton.visible=!1,a.AudioManager.getInstance().isAudioMuted=!1)},c.prototype.onClickStats=function(){if(!this.layerBeingShown){this.layerBeingShown=!0;var b=new a.StatsLayer(this.game,this);b.y=this.game.camera.y,this.add(b)}},c.prototype.onClickHome=function(){this.game.add.tween(this.sideButtonsContainer).to({x:-100},350,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){a.GameState.currentInstance.onHomeButtonPressed()},this),a.AudioManager.getInstance().playSound("click")},c.prototype.checkShowMysticalMessage=function(){if(a.GameVars.getInstance().gameStage!==a.GameConstants.DIFFICULT_STAGE||!a.GameVars.getInstance().stagePassed)return!1;var c,d,b=a.GameVars.getInstance().gameText,e=!1;if(a.GameVars.getInstance().gameRound===a.GameConstants.SECOND_ROUND?(d=35,c=b.GAME_SECOND_REVELATION,a.GameVars.getInstance().stagesState[5]&&(e=!0,a.GameVars.getInstance().finalRevelationShown=!0)):(d=32,c=b.GAME_FIRST_REVELATION,!a.GameVars.getInstance().stagesState[3]||a.GameVars.getInstance().stagesState[4]||a.GameVars.getInstance().firstMessageShown||(a.GameVars.getInstance().firstMessageShown=!0,e=!0)),!e)return!1;var f=new Phaser.BitmapText(this.game,240,320,"victor-pixel-easy",c,d);return f.x-=f.width/2,f.y-=f.height/2,f.align="center",f.alpha=0,this.add(f),this.game.add.tween(f).to({alpha:1},450,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.game.add.tween(f).to({alpha:0},450,Phaser.Easing.Cubic.Out,!0,3500)},this),!0},c}(Phaser.Group);a.EndLevelLayer=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(a){b.call(this,a,null,"cheat-menu",!1);var c=new Phaser.Button(this.game,385,65,"texture_atlas_0",this.onLevelPassed,this,1,0,1);c.setFrames("win_button_on.png","win_button_off.png","win_button_on.png"),this.add(c);var d=new Phaser.Button(this.game,385,150,"texture_atlas_0",this.onLevelLost,this,1,0,1);d.setFrames("lose_button_on.png","lose_button_off.png","lose_button_on.png"),this.add(d)}return __extends(c,b),c.prototype.onLevelPassed=function(){a.GameVars.getInstance().bananas=5,a.LevelManager.getInstance().onLevelPassed(),this.visible=!1},c.prototype.onLevelLost=function(){a.GameVars.getInstance().bananas=5,a.LevelManager.getInstance().onLoseLevelPressed(),this.visible=!1},c}(Phaser.Group);a.CheatMenu=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.create=function(){c.currentInstance=this,this.stageShacking=!1,this.gameController=new a.GameController(this.game),this.backgroundManager=new a.BackgroundManager(this.game),this.add.existing(this.backgroundManager),this.gorillasContainer=this.add.group(),this.maleGorilla=new a.Gorilla(this.game,a.Gorilla.MALE),this.gorillasContainer.add(this.maleGorilla),this.femaleGorilla=new a.Gorilla(this.game,a.Gorilla.FEMALE),this.gorillasContainer.add(this.femaleGorilla),this.maleGorilla.oppositeGorilla=this.femaleGorilla,this.femaleGorilla.oppositeGorilla=this.maleGorilla,this.bananaThrower=new a.BananaThrower(this.game),this.add.existing(this.bananaThrower),this.bananasContainer=this.bananaThrower.bananasContainer,this.hud=new a.HUD(this.game,this.bananaThrower),this.add.existing(this.hud),a.LevelManager.getInstance().onNewGame(this),a.GameConstants.DEVELOPMENT&&(this.cheatMenu=new a.CheatMenu(this.game),this.add.existing(this.cheatMenu)),this.fadeInLayer=this.add.sprite(0,0,this.game.cache.getBitmapData("fade_in_out")),this.fadeInLayer.scale.setTo(7.5,10),this.add.tween(this.fadeInLayer).to({alpha:0},500,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.fadeInLayer.destroy(),this.initialize()},this)},c.prototype.initialize=function(){this.hud.init(),this.bananaThrower.init(),this.gameController.init(this.backgroundManager.backgroundSprite),this.currentAudioLoop="Loop_01",a.AudioManager.getInstance().playSound(this.currentAudioLoop,!0)},c.prototype.shutdown=function(){this.gameController.destroy(),c.currentInstance=null,b.prototype.shutdown.call(this)},c.prototype.update=function(){if(b.prototype.update.call(this),this.game.physics.arcade.overlap(this.bananasContainer,this.femaleGorilla,a.LevelManager.getInstance().onGorillaHit,null,a.LevelManager.getInstance()),this.game.physics.arcade.overlap(this.bananasContainer,this.maleGorilla,a.LevelManager.getInstance().onGorillaHit,null,a.LevelManager.getInstance()),this.stageShacking){var c=this.game.rnd.integerInRange(-10,10),d=this.game.rnd.integerInRange(-10,10);this.game.world.setBounds(c,d,480,640)}},c.prototype.render=function(){a.GameConstants.SHOW_PHYSICS_BODIES&&(this.game.debug.body(this.maleGorilla.gorillaBody),this.game.debug.body(this.maleGorilla.gorillaCollisionBodyLeft),this.game.debug.body(this.maleGorilla.gorillaCollisionBodyRight),this.game.debug.body(this.femaleGorilla.gorillaBody),this.game.debug.body(this.femaleGorilla.gorillaCollisionBodyLeft),this.game.debug.body(this.femaleGorilla.gorillaCollisionBodyRight),this.bananasContainer.forEachAlive(function(a){this.game.debug.body(a)},this))},c.prototype.onExplosion=function(){this.stageShacking=!0,this.game.time.events.add(450,function(){this.stageShacking=!1,this.game.world.setBounds(0,0,480,640)},this)},c.prototype.onLevelPassed=function(){this.bananaThrower.onLevelPassed(),this.backgroundManager.onLevelPassed(),this.maleGorilla.onLevelPassed(),this.femaleGorilla.onLevelPassed(),this.game.time.events.add(2500,function(){a.AudioManager.getInstance().stopSound("win_V2",!0),this.backgroundManager.deactivateAnimation(),this.onEndLevel()},this),a.AudioManager.getInstance().stopSound(this.currentAudioLoop,!0,!0),a.AudioManager.getInstance().playSound("win_V2")},c.prototype.onEndLevel=function(){a.GameConstants.DEVELOPMENT&&(this.cheatMenu.visible=!1),this.maleGorilla.disappear(),this.femaleGorilla.disappear(),this.game.time.events.add(450,function(){this.gameOverLayer=new a.EndLevelLayer(this.game),this.add.existing(this.gameOverLayer),a.GameVars.getInstance().stagePassed||a.AudioManager.getInstance().stopSound(this.currentAudioLoop,!0,!0)},this),a.GameVars.getInstance().stagePassed||a.AudioManager.getInstance().playSound("gameover_V2")},c.prototype.onHomeButtonPressed=function(){var a=this.add.sprite(0,0,this.game.cache.getBitmapData("fade_in_out"));a.alpha=0,a.scale.setTo(7.5,10),this.add.tween(this.fadeInLayer).to({alpha:1},400,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.game.state.start("SplashState",!0,!1)},this)},c.prototype.onClickPlay=function(b,c){a.GameModel.getInstance().setGameStage(b,c),this.game.state.start("GameState",!0,!1)},c.prototype.changeAudioLoop=function(){var b=9-a.GameVars.getInstance().bananas/4;a.AudioManager.getInstance().stopSound(this.currentAudioLoop,!1,!0),this.currentAudioLoop="Loop_0"+b.toString(),a.AudioManager.getInstance().playSound(this.currentAudioLoop,!0)},c}(Phaser.State);a.GameState=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c){b.call(this,c,null,"banana-preload",!1),this.scale.setTo(.92,.92*a.GameVars.getInstance().scaleY),this.game.add.tween(this.scale).to({x:1,y:a.GameVars.getInstance().scaleY},5e3,Phaser.Easing.Cubic.In,!0),this.x=305,this.y=340,this.percentageLoaded=0,this.pixelSprites=new Array,this.i=0;var d=this.game.add.bitmapData(11,19,"banana-preloader",!0);d.draw(this.game.cache.getImage("banana-preload"),0,0),d.update(0,0,11,19);for(var e,f=0;f<11;f++)for(var g=0;g<19;g++){var h=d.getPixel32(f,g),i=255&h,j=h>>8&255,k=h>>16&255,l=h>>24&255;if(l){var m="#"+i.toString(16)+j.toString(16)+k.toString(16);e=this.game.add.bitmapData(30,30,"pixel",!0),e.ctx.beginPath(),e.ctx.rect(0,0,30,30),e.ctx.fillStyle=m,e.ctx.fill();var n=new Phaser.Sprite(this.game,30*f-240,30*g-320,e);n.anchor.set(.5),n.visible=!1;var o=new Phaser.Sprite(this.game,0,0,"texture_atlas_3","mask_0001.png");o.anchor.set(.5),o.scale.set(1.065),o.animations.add("transform",Phaser.Animation.generateFrameNames("mask_",1,23,".png",4),24,!1),n.addChild(o),n.circleMask=o,this.pixelSprites.push(n),this.add(n)}}this.pixelSprites=Phaser.ArrayUtils.shuffle(this.pixelSprites)}return __extends(c,b),c.prototype.showPixelSprites=function(a){for(var b,c;this.i<this.pixelSprites.length*a/100;)this.i/this.pixelSprites.length<.3?(b=.65,c=4):this.i/this.pixelSprites.length<.7?(b=.15,c=8):(b=.1,c=10),this.pixelSprites[this.i].angle=30-60*Math.random(),this.game.add.tween(this.pixelSprites[this.i]).to({angle:0},b*(2500+1500*Math.random()),Phaser.Easing.Cubic.Out,!0),this.pixelSprites[this.i].scale.set(0),this.game.add.tween(this.pixelSprites[this.i].scale).to({x:1,y:1},b*(2500+1500*Math.random()),Phaser.Easing.Cubic.Out,!0),this.pixelSprites[this.i].visible=!0,this.pixelSprites[this.i].circleMask.play("transform",c),this.i++},c.prototype.uploadPercentageChanged=function(a){this.showPixelSprites(a)},c}(Phaser.Group);a.BananaPreload=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.preload=function(){c.game=this.game,this.generateBitmapData(),this.preloadItemsContainer=this.add.group(),this.bananaPreload=new a.BananaPreload(this.game),this.preloadItemsContainer.add(this.bananaPreload);var b=a.GameVars.getInstance().gameText;this.loadingLabel=new Phaser.BitmapText(this.game,240,575,"victor-white",b.LOADING,70),this.loadingLabel.visible=!1,this.loadingLabel.x-=.5*this.loadingLabel.width,this.preloadItemsContainer.add(this.loadingLabel),this.loadingLabelInVisibleEvent=this.game.time.events.loop(850,this.loadingLabelInvisible,this),this.game.time.events.add(200,this.delayLoadingLabelVisibility,this),this.load.baseURL=a.GameConstants.ASSETS_BASE_URL,(a.GameConstants.DEVELOPMENT||a.GameConstants.HAS_SECRET_BUTTON)&&this.load.atlas("texture_atlas_0","texture_atlas_0.png","texture_atlas_0.json"),this.load.atlas("texture_atlas_1","texture_atlas_1.png","texture_atlas_1.json"),a.GameConstants.LANGUAGE===a.GameConstants.ENGLISH?this.load.atlas("texture_atlas_2","texture_atlas_2_en.png","texture_atlas_2_en.json"):a.GameConstants.LANGUAGE===a.GameConstants.PORTUGUESE&&this.load.atlas("texture_atlas_2","texture_atlas_2_pt.png","texture_atlas_2_pt.json"),this.load.atlas("texture_atlas_4","texture_atlas_4.png","texture_atlas_4.json"),this.load.atlas("texture_atlas_5","texture_atlas_5.png","texture_atlas_5.json"),this.load.atlas("texture_atlas_6","texture_atlas_6.png","texture_atlas_6.json"),this.load.audiosprite("audio_effects",["audio/audiosprite.mp3"],"audio/audiosprite.json"),this.load.bitmapFont("victor-pixel-medium","fonts/victor-pixel-medium.png","fonts/victor-pixel-medium.xml"),this.load.bitmapFont("victor-pixel-difficult","fonts/victor-pixel-difficult.png","fonts/victor-pixel-difficult.xml"),this.load.bitmapFont("victor-pixel-dynamite","fonts/victor-pixel-dynamite.png","fonts/victor-pixel-dynamite.xml"),this.load.bitmapFont("victor-pixel-easy","fonts/victor-pixel-easy.png","fonts/victor-pixel-easy.xml"),this.load.json("stages","stages/stages.json"),this.loadSponsorAssets(),this.load.onFileComplete.add(this.updateLoadedPercentage,this)},c.prototype.create=function(){a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&LaggedAPI.init("banana_mania_init","lagdevaF3001");var b=a.GameConstants.DEVELOPMENT?0:4500;this.add.tween(this.preloadItemsContainer).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,b).onComplete.add(this.startSplash,this)},c.prototype.startSplash=function(){a.AudioManager.getInstance().init(this.game),a.GameConstants.SPONSOR===a.GameConstants.GAMEPIX?GamePix.game.gameLoaded(function(){c.game.state.start("SponsorLogoState",!0,!1)}):a.GameConstants.SPONSOR===a.GameConstants.CLICKJOGOS?c.game.state.start("SponsorLogoState",!0,!1):this.game.state.start("SplashState",!0,!1)},c.prototype.updateLoadedPercentage=function(){this.bananaPreload.uploadPercentageChanged(this.load.progress),a.GameConstants.SPONSOR===a.GameConstants.GAMEPIX&&GamePix.game.gameLoading(this.load.progress)},c.prototype.generateBitmapData=function(){var b=this.game.add.bitmapData(64,64,"black_square",!0);b.ctx.beginPath(),b.ctx.rect(0,0,64,64),b.ctx.fillStyle="#213451",b.ctx.fill(),b=this.game.add.bitmapData(64,64,"fade_in_out",!0),b.ctx.beginPath(),b.ctx.rect(0,0,64,64),b.ctx.fillStyle="#2e283a",b.ctx.fill(),a.GameConstants.SPONSOR===a.GameConstants.CLICKJOGOS&&(b=this.game.add.bitmapData(16,16,"intro_orange",!0),b.ctx.beginPath(),b.ctx.rect(0,0,16,16),b.ctx.fillStyle="#ff5108",b.ctx.fill())},c.prototype.delayLoadingLabelVisibility=function(){this.loadingLabelVisibleEvent=this.game.time.events.loop(850,this.loadingLabelVisible,this)},c.prototype.loadingLabelVisible=function(){this.loadingLabel.visible=!0},c.prototype.loadingLabelInvisible=function(){this.loadingLabel.visible=!1},c.prototype.loadSponsorAssets=function(){a.GameConstants.SPONSOR===a.GameConstants.GAMEPIX?this.load.image("logo-sponsor","images/logo-gamepix.png"):a.GameConstants.SPONSOR===a.GameConstants.CLICKJOGOS?this.load.image("logo-sponsor","images/logo_clickjogos.png"):a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&this.load.image("logo-lagged","images/lagged-3.png")},c}(Phaser.State);a.PreLoader=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.preload=function(){this.load.baseURL=a.GameConstants.ASSETS_BASE_URL,this.load.image("banana-preload","banana.png"),this.load.atlas("texture_atlas_3","texture_atlas_3.png","texture_atlas_3.json"),this.load.bitmapFont("victor-white","fonts/victor-white.png","fonts/victor-white.xml"),this.load.json("game_text","config/game-text.json")},c.prototype.create=function(){this.input.maxPointers=1,this.game.stage.backgroundColor="#000000",this.game.device.desktop?(a.GameVars.getInstance().scaleY=1,this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.pageAlignHorizontally=!0):(a.GameVars.getInstance().scaleY=Math.round(4/3/(window.innerHeight/window.innerWidth)*100)/100,this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0),a.GameVars.getInstance().init(this.game),a.LevelManager.getInstance().init(this.game),a.LevelFactory.getInstance().init(this.game),a.AchievementsManager.getInstance().init(),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.setBoundsToWorld(),this.game.time.advancedTiming=!0,this.game.device.safari&&!this.isLocalStorageNameSupported()?alert("This game uses local storage. It doesn't support private browsing"):this.game.state.start("PreLoader",!0,!1)},c.prototype.isLocalStorageNameSupported=function(){var a="test",b=window.sessionStorage;try{return b.setItem(a,"1"),b.removeItem(a),!0}catch(a){return!1}},c}(Phaser.State);a.Boot=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.create=function(){c.currentInstance=this,this.shake=!1,this.shakeAmplitude=3,this.cameraTweening=!1,this.layerBeingShown=!1,this.moreGamesButton=null,this.backgroundImage=this.add.image(0,0,"texture_atlas_5","splash_fondo.png"),this.splashDecorationImage=this.add.image(0,1915,"texture_atlas_5","splash_adorno_1.png"),this.splashDecorationImage.anchor.setTo(0,1),this.parrot=this.add.sprite(402,467,"texture_atlas_5","parrot_0001.png"),this.parrot.animations.add("fear",Phaser.Animation.generateFrameNames("parrot_",2,3,".png",4),6,!0),this.gorillasContainer=new a.SplashGorillasContainer(this.game),this.add.existing(this.gorillasContainer),this.banana=new a.BananaSplash(this.game),this.add.existing(this.banana),this.godRays=this.add.image(395,0,"texture_atlas_5","rays.png"),this.godRays.blendMode=3,this.godRays.anchor.setTo(.5,.4),this.godRays.alpha=0,this.gameTitle=new a.GameTitle(this.game),this.gameTitle.x=45,this.gameTitle.y=-150,this.add.existing(this.gameTitle);var b=a.GameVars.getInstance().gameText;if(this.tapToStartLabel=this.add.bitmapText(240,500,"victor-pixel-easy",b.SPLASH_TAP,b.SPLASH_TAP_FONT_SIZE),this.tapToStartLabel.x-=this.tapToStartLabel.width/2,this.tapToStartLabel.visible=!1,this.addButtons(),a.GameConstants.HAS_SECRET_BUTTON){var d=this.add.sprite(240,390,this.game.cache.getBitmapData("black_square"));d.alpha=0,d.scale.setTo(2,.5),d.anchor.set(.5),d.inputEnabled=!0,d.events.onInputDown.add(this.onClickSecretButton,this)}this.fadeInLayer=this.add.sprite(0,0,this.game.cache.getBitmapData("fade_in_out")),this.fadeInLayer.scale.setTo(7.5,10),this.add.tween(this.fadeInLayer).to({alpha:0},1100,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.fadeInLayer.destroy(),this.game.time.events.add(1750,this.showColumn,this)},this),this.sponsorLogo=null,a.GameConstants.SPONSOR===a.GameConstants.LAGGED&&(this.sponsorLogo=this.add.image(a.GameConstants.GAME_WIDTH/2,600,"logo-lagged"),this.sponsorLogo.anchor.x=.5)},c.prototype.update=function(){if(b.prototype.update.call(this),this.shake){var a=this.game.rnd.integerInRange(-this.shakeAmplitude,this.shakeAmplitude),c=this.game.rnd.integerInRange(-this.shakeAmplitude,this.shakeAmplitude);this.game.world.setBounds(a,c,480+a,640+c)}},c.prototype.onColumnDeployed=function(){this.game.add.tween(this.gameTitle).to({y:50},600,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){a.AudioManager.getInstance().playSound("Stinger")},this),this.game.add.tween(this.godRays).to({alpha:1},400,Phaser.Easing.Cubic.Out,!0,850,0,!0),this.banana.appear(),this.backgroundImage.inputEnabled=!0,this.backgroundImage.input.priorityID=0,this.backgroundImage.events.onInputDown.add(this.onTap,this),this.tapToStartLabel.visible=!0,this.tapLabelInVisibleEvent=this.game.time.events.loop(850,this.tapLabelInVisible,this),this.game.time.events.add(200,this.delayTapLabelVisibility,this);var b=a.GameVars.getInstance().gameText,c=this.add.bitmapText(2,405,"victor-white",b.SPLASH_COPYRIGHT+a.GameConstants.SPONSOR,b.SPLASH_COPYRIGHT_FONT_SIZE);c.tint=3951752,c.scale.set(.5,1),c.angle=-90,c.alpha=.75,this.moreGamesButton&&(this.moreGamesButton.visible=!0)},c.prototype.fadeShaking=function(){this.parrot.animations.stop("fear",!0),this.parrot.frameName="parrot_0001.png",this.game.add.tween(this).to({shakeAmplitude:0},600,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.shake=!1,this.game.world.setBounds(0,0,480,640),this.game.camera.setSize(480,640),this.game.camera.bounds=new Phaser.Rectangle(0,0,480,2250)},this),this.game.add.tween(this.sideButtonsContainer).to({x:0},450,Phaser.Easing.Cubic.Out,!0,250)},c.prototype.tweenTitle=function(){this.gameTitle.tweenCharacters()},c.prototype.onClickPlay=function(b,d){a.GameModel.getInstance().setGameStage(b,d),this.game.add.tween(this.sideButtonsContainer).to({x:-100},340,Phaser.Easing.Cubic.Out,!0,150),this.game.add.tween(this.game.camera).to({y:1200},850,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){c.currentInstance=null,this.game.state.start("GameState",!0,!1)},this),a.AudioManager.getInstance().stopSound("Stinger",!0)},c.prototype.showColumn=function(){this.shake=!0,this.parrot.play("fear"),this.game.time.events.add(450,function(){this.gorillasContainer.showColumn(this.banana)},this),a.AudioManager.getInstance().playSound("terremoto"),a.AudioManager.getInstance().playSound("loro")},c.prototype.addButtons=function(){this.splashLevelButtonsContainer=new a.SplashLevelButtonsContainer(this.game),this.add.existing(this.splashLevelButtonsContainer),this.sideButtonsContainer=this.add.group(),this.sideButtonsContainer.x=-100,this.audioOnButton=this.add.button(0,418,"texture_atlas_2",this.onClickMusicOn,this,"music_on_off.png","music_on_on.png","music_on_off.png"),this.audioOnButton.forceOut=!0,this.audioOnButton.fixedToCamera=!0,this.sideButtonsContainer.add(this.audioOnButton),this.audioOffButton=this.add.button(0,418,"texture_atlas_2",this.onClickMusicOff,this,"music_off_off.png","music_off_on.png","music_off_off.png"),
this.audioOffButton.forceOut=!0,this.audioOffButton.fixedToCamera=!0,this.sideButtonsContainer.add(this.audioOffButton),a.AudioManager.getInstance().isAudioMuted?this.audioOnButton.visible=!1:this.audioOffButton.visible=!1;var b=this.add.button(0,490,"texture_atlas_2",this.onClickStats,this,"stats_on.png","stats_off.png","stats_on.png");b.forceOut=!0,b.fixedToCamera=!0,this.sideButtonsContainer.add(b);var c=this.add.button(0,562,"texture_atlas_2",this.onClickCredits,this,"credits_on.png","credits_off.png","credits_on.png");c.forceOut=!0,c.fixedToCamera=!0,this.sideButtonsContainer.add(c)},c.prototype.delayTapLabelVisibility=function(){this.tapLabelVisibleEvent=this.game.time.events.loop(850,this.tapLabelVisible,this)},c.prototype.tapLabelVisible=function(){this.tapToStartLabel.visible=!0},c.prototype.tapLabelInVisible=function(){this.tapToStartLabel.visible=!1},c.prototype.onTap=function(){this.layerBeingShown||(this.tapLabelInVisibleEvent&&(this.tapLabelInVisibleEvent.pendingDelete=!0),this.tapLabelVisibleEvent&&(this.tapLabelVisibleEvent.pendingDelete=!0),this.moreGamesButton&&(this.moreGamesButton.visible=!1),this.tapToStartLabel.destroy(),this.banana.disappear(),this.cameraTweening=!0,this.game.add.tween(this.game.camera).to({y:555},1e3,Phaser.Easing.Cubic.Out,!0,350).onComplete.add(function(){this.onCameraTweenComplete()},this),this.sponsorLogo&&this.sponsorLogo.destroy(),a.AudioManager.getInstance().playSound("click"))},c.prototype.onCameraTweenComplete=function(){this.cameraTweening=!1,this.gorillasContainer.destroy(),this.splashLevelButtonsContainer.appear()},c.prototype.onClickMusicOn=function(){this.layerBeingShown||(this.audioOnButton.visible=!1,this.audioOffButton.visible=!0,a.AudioManager.getInstance().isAudioMuted=!0)},c.prototype.onClickMusicOff=function(){this.layerBeingShown||(this.audioOnButton.visible=!0,this.audioOffButton.visible=!1,a.AudioManager.getInstance().isAudioMuted=!1)},c.prototype.onClickCredits=function(){if(!this.cameraTweening&&!this.layerBeingShown){this.layerBeingShown=!0;var b=new a.CreditsLayer(this.game,this);b.y=this.game.camera.y,this.add.existing(b),a.AudioManager.getInstance().playSound("click")}},c.prototype.onClickStats=function(){if(!this.cameraTweening&&!this.layerBeingShown){this.layerBeingShown=!0;var b=new a.StatsLayer(this.game,this);b.y=this.game.camera.y,this.add.existing(b),a.AudioManager.getInstance().playSound("click")}},c.prototype.onClickSecretButton=function(){a.GameConstants.DEVELOPMENT=!0,this.game.state.start("SplashState",!0,!1),a.AudioManager.getInstance().playSound("click")},c}(Phaser.State);a.SplashState=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c,d){b.call(this,c,null,"credits layer",!1),this.sceneCovered=d;var e=a.GameVars.getInstance().gameText,f=this.create(0,0,"texture_atlas_4","bg_02.png");this.add(f);var g=this.create(240,20,"texture_atlas_5","credits.png");g.anchor.setTo(.5,0),this.add(g);var h=new Phaser.BitmapText(this.game,140,150,"victor-white",e.CREDITS_GAME_DESIGN,30);h.align="center",h.scale.set(.72,1),h.x-=h.width/2,h.tint=11468654,this.add(h);var i=new Phaser.BitmapText(this.game,340,150,"victor-white",e.CREDITS_ART,30);i.align="center",i.scale.set(.72,1),i.x-=i.width/2,i.tint=16768589,this.add(i);var j=new Phaser.BitmapText(this.game,120,320,"victor-white",e.CREDITS_AUDIO,30);j.align="center",j.scale.set(.72,1),j.x-=j.width/2,j.tint=2615039,this.add(j);var k=new Phaser.BitmapText(this.game,340,320,"victor-white",e.CREDITS_BETA_TESTING,30);k.align="center",k.scale.set(.72,1),k.x-=k.width/2,k.tint=2819596,this.add(k);var l=new Phaser.BitmapText(this.game,240,430,"victor-white",e.CREDITS_INSPIRED,32);l.align="center",l.scale.set(.72,1),l.x-=l.width/2,l.tint=16776960,this.add(l);var m=new Phaser.BitmapText(this.game,240,525,"victor-white",e.CREDITS_PHASER,32);m.align="center",m.scale.set(.72,1),m.x-=m.width/2,m.tint=14540253,this.add(m);var n=new Phaser.BitmapText(this.game,240,600,"victor-white","V"+a.GameConstants.VERSION,26);n.x-=n.width/2,this.add(n),this.homeButton=new Phaser.Button(this.game,0,418,"texture_atlas_2",this.onClickBackButton,this,"button_home_on.png","button_home_off.png","button_home_on.png"),this.add(this.homeButton)}return __extends(c,b),c.prototype.destroy=function(a,c){this.homeButton.clearFrames(),b.prototype.destroy.call(this,a,c)},c.prototype.onClickBackButton=function(){this.sceneCovered.layerBeingShown=!1,a.AudioManager.getInstance().playSound("click"),this.destroy()},c}(Phaser.Group);a.CreditsLayer=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c,d){b.call(this,c,null,"stats-layer",!1),this.sceneCovered=d,a.GameVars.getInstance().timesStatsChecked++,a.GameVars.getInstance().saveGameState();var e=this.create(0,0,"texture_atlas_5","bg_stats.png");this.add(e),this.addLabels(),this.composeText(),this.homeButton=new Phaser.Button(this.game,0,562,"texture_atlas_2",this.onClickBackButton,this,"button_home_on.png","button_home_off.png","button_home_on.png"),this.add(this.homeButton)}return __extends(c,b),c.prototype.destroy=function(a,c){this.homeButton.clearFrames(),b.prototype.destroy.call(this,a,c)},c.prototype.addLabels=function(){var b=a.GameVars.getInstance().gameText,d=new Phaser.BitmapText(this.game,0,2,"victor-white",b.STATS_GAME_SESSIONS,38);d.scale.set(.68,1),d.x=480-d.width-15,d.tint=16776960,this.add(d);var e=new Phaser.BitmapText(this.game,0,2+c.LABEL_DY,"victor-white",b.STATS_BANANAS_THROWN,38);e.scale.set(.68,1),e.x=480-e.width-15,e.tint=16776960,this.add(e);var f=new Phaser.BitmapText(this.game,0,2+2*c.LABEL_DY,"victor-white",b.STATS_EXPLOSIONS,38);f.scale.set(.68,1),f.x=480-f.width-15,f.tint=16776960,this.add(f);var g=new Phaser.BitmapText(this.game,0,2+3*c.LABEL_DY,"victor-white",b.STATS_TIMES_STATS_CHECKED,38);g.scale.set(.68,1),g.x=480-g.width-15,g.tint=16776960,this.add(g);var h=new Phaser.BitmapText(this.game,0,2+4*c.LABEL_DY,"victor-white",b.STATS_TIME_PLAYING,38);h.scale.set(.68,1),h.x=480-h.width-15,h.tint=16776960,this.add(h);var i;i=a.GameVars.getInstance().finalRevelationShown?b.STATS_FINAL_REVELATION+b.STATS_YES:b.STATS_FINAL_REVELATION+b.STATS_NO;var j=new Phaser.BitmapText(this.game,0,2+5*c.LABEL_DY,"victor-white",i,38);j.scale.set(.68,1),j.x=480-j.width-15,j.tint=16776960,this.add(j)},c.prototype.composeText=function(){var b=this.getNumericalGroup(a.GameVars.getInstance().sessions);b.x=100,b.y=38,this.add(b);var d=this.getNumericalGroup(a.GameVars.getInstance().totalBananasThrown);d.x=100,d.y=38+c.LABEL_DY,this.add(d);var e=this.getNumericalGroup(a.GameVars.getInstance().explosions);e.x=100,e.y=38+2*c.LABEL_DY,this.add(e);var f=this.getNumericalGroup(a.GameVars.getInstance().timesStatsChecked);f.x=100,f.y=38+3*c.LABEL_DY,this.add(f);var g=this.getTimeGroup();g.x=132,g.y=38+4*c.LABEL_DY,this.add(g)},c.prototype.onClickBackButton=function(){this.sceneCovered.layerBeingShown=!1,a.AudioManager.getInstance().playSound("click"),this.destroy()},c.prototype.getNumericalGroup=function(a){var h,b=new Phaser.Group(this.game),c=Math.floor(a/1e4),d=Math.floor((a-1e4*c)/1e3),e=Math.floor((a-1e4*c-1e3*d)/100),f=Math.floor((a-1e4*c-1e3*d-100*e)/10),g=a-1e4*c-1e3*d-100*e-10*f,i=0;return h=new Phaser.Image(this.game,i,0,"texture_atlas_5","points_0"+c.toString()+".png"),b.add(h),i+=h.width,h=new Phaser.Image(this.game,i,0,"texture_atlas_5","points_0"+d.toString()+".png"),b.add(h),i+=h.width,h=new Phaser.Image(this.game,i,0,"texture_atlas_5","points_0"+e.toString()+".png"),b.add(h),i+=h.width,h=new Phaser.Image(this.game,i,0,"texture_atlas_5","points_0"+f.toString()+".png"),b.add(h),i+=h.width,h=new Phaser.Image(this.game,i,0,"texture_atlas_5","points_0"+g.toString()+".png"),b.add(h),b},c.prototype.getTimeGroup=function(){var g,b=new Phaser.Group(this.game),c=Math.floor(a.GameVars.getInstance().timePlaying/3600),d=Math.floor((a.GameVars.getInstance().timePlaying-3600*c)/60),e=Math.floor(c/10),f=c-10*e,h=10;g=new Phaser.Image(this.game,h,0,"texture_atlas_5","points_0"+e.toString()+".png"),b.add(g),h+=g.width,g=new Phaser.Image(this.game,h,0,"texture_atlas_5","points_0"+f.toString()+".png"),b.add(g),h+=g.width,g=new Phaser.Image(this.game,h,14,"texture_atlas_5","dos_puntos.png"),b.add(g),h+=g.width;var i=Math.floor(d/10),j=d-10*i;return g=new Phaser.Image(this.game,h,0,"texture_atlas_5","points_0"+i.toString()+".png"),b.add(g),h+=g.width,g=new Phaser.Image(this.game,h,0,"texture_atlas_5","points_0"+j.toString()+".png"),b.add(g),b},c.LABEL_DY=115.85,c}(Phaser.Group);a.StatsLayer=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.create=function(){var b,c;if(a.GameConstants.SPONSOR===a.GameConstants.GAMEPIX){var d=this.add.bitmapText(240,35,"victor-white","A GAME BY: \nRAVALMATIC",50);d.x-=d.width/2,d.scale.y=a.GameVars.getInstance().scaleY;var e=this.add.bitmapText(240,300,"victor-white","SPONSORED BY:",25);e.align="center",e.x-=e.width/2,e.scale.y=a.GameVars.getInstance().scaleY,b=this.add.image(240,380,"logo-sponsor"),b.anchor.setTo(.5,.5),b.scale.y=a.GameVars.getInstance().scaleY,c=3e3}else if(a.GameConstants.SPONSOR===a.GameConstants.CLICKJOGOS){var f=this.add.sprite(0,0,this.game.cache.getBitmapData("intro_orange"));f.scale.setTo(30,40),b=this.add.image(240,320,"logo-sponsor"),b.anchor.setTo(.5,.5),c=2500}this.game.time.events.add(c,function(){this.game.state.start("SplashState",!0,!1)},this)},c}(Phaser.State);a.SponsorLogoState=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(a,c,d){b.call(this,a,null,"dev level button"+c,!1),this.index=c,this.gameMode=d;var e=new Phaser.Button(this.game,0,0,"texture_atlas_0",this.onClickButton,this);e.setFrames("development_level_selection_button_on.png","development_level_selection_button_off.png","development_level_selection_button_on.png"),this.add(e);var f=new Phaser.BitmapText(this.game,20,10,"victor-pixel-easy",(c+1).toString(),24);f.x-=.5*f.width,this.add(f)}return __extends(c,b),c.prototype.onClickButton=function(){a.GameVars.getInstance().editingLevels=!0,a.GameVars.getInstance().level=this.index,a.GameModel.getInstance().setGameStage(this.gameMode,a.GameConstants.FIRST_ROUND),this.game.state.start("GameState",!0,!1)},c}(Phaser.Group);a.DevelopmentLevelSelectionButton=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.create=function(){this.shakeAmplitude=3,this.shake=!1;var b=this.add.sprite(0,0,this.game.cache.getBitmapData("game_scene_background"));b.scale.setTo(30,5),this.add.button(10,10,"texture_atlas_2",this.onClickBackButton,this,"back_button_on.png","back_button_off.png","back_button_on.png"),this.add.button(160,540,"texture_atlas_0",this.onClickReset,this,"reset_button_on.png","reset_button_off.png","reset_button_on.png");var c=this.add.button(345,5,"texture_atlas_0",this.onClickReload,this,"reload_button_on.png","reload_button_off.png","reload_button_on.png");c.forceOut=!0,this.add.bitmapText(180,35,"victor-pixel-easy","EASY",40);var d,e,f;for(this.buttonsGroup=this.add.group(),d=0;d<2;d++)for(e=0;e<8;e++)f=new a.DevelopmentLevelSelectionButton(this.game,8*d+e,a.GameConstants.EASY_STAGE),f.x=20+55*e,f.y=85+55*d,this.buttonsGroup.add(f);for(this.add.bitmapText(160,215,"victor-pixel-easy","MEDIUM",40),d=0;d<2;d++)for(e=0;e<8;e++)f=new a.DevelopmentLevelSelectionButton(this.game,8*d+e,a.GameConstants.MEDIUM_STAGE),f.x=20+55*e,f.y=265+55*d,this.buttonsGroup.add(f);this.add.bitmapText(145,395,"victor-pixel-easy","DIFFICULT",40),f=new a.DevelopmentLevelSelectionButton(this.game,0,a.GameConstants.DIFFICULT_STAGE),f.x=20,f.y=445,this.buttonsGroup.add(f)},c.prototype.update=function(){if(this.shake){var a=this.game.rnd.integerInRange(-this.shakeAmplitude,this.shakeAmplitude),b=this.game.rnd.integerInRange(-this.shakeAmplitude,this.shakeAmplitude);this.game.world.setBounds(a,b,480+a,640+b)}},c.prototype.onClickBackButton=function(){this.game.state.start("SplashState",!0,!1)},c.prototype.onClickReset=function(){this.shake||(a.GameVars.getInstance().resetGameState(),this.shake=!0,this.shakeAmplitude=3,this.game.add.tween(this).to({shakeAmplitude:0},600,Phaser.Easing.Cubic.Out,!0,900).onComplete.add(function(){this.shake=!1,this.game.world.setBounds(0,0,480,640)},this))},c.prototype.onClickReload=function(){this.buttonsGroup.visible=!1;var a=this.load.json("stages","assets/stages/stages.json");a.onLoadComplete.addOnce(this.onLevelsReloaded,this),a.start()},c.prototype.onLevelsReloaded=function(){this.buttonsGroup.visible=!0},c}(Phaser.State);a.DevelopmentState=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(){b.call(this,a.GameConstants.GAME_WIDTH,a.GameConstants.GAME_HEIGHT,Phaser.AUTO,"content",null,!1,!1,null),c.currentInstance=this,this.state.add("PreLoader",a.PreLoader,!1),this.state.add("SponsorLogoState",a.SponsorLogoState,!1),this.state.add("SplashState",a.SplashState,!1),this.state.add("GameState",a.GameState,!1),(a.GameConstants.DEVELOPMENT||a.GameConstants.HAS_SECRET_BUTTON)&&this.state.add("DevelopmentState",a.DevelopmentState,!1),this.state.add("Boot",a.Boot,!0)}return __extends(c,b),c}(Phaser.Game);a.Game=b}(bananamania||(bananamania={})),window.onload=function(){new bananamania.Game};var bananamania;!function(a){var b=function(b){function c(a,c){b.call(this,a,null,"head",!1),this.gorilla=c,this.hasExploded=!1,this.gorillaType=c.gorillaType,this.eyelidCounter=0,this.headSprite=this.create(0,0,"texture_atlas_5",this.gorillaType+"_eating_0030.png"),this.headSprite.anchor.set(.5,1),this.headSprite.animations.add("eat",Phaser.Animation.generateFrameNames(this.gorillaType+"_eating_",1,30,".png",4),14,!1),this.headSprite.animations.add("scared",Phaser.Animation.generateFrameNames("gorilla_"+this.gorillaType+"_fear_",1,3,".png",4),14,!1),this.headSprite.animations.add("victory",Phaser.Animation.generateFrameNames("victory_"+this.gorillaType+"_",1,6,".png",4),12,!1),this.headSprite.animations.add("out-of-bounds",Phaser.Animation.generateFrameNames("game_over_"+this.gorillaType+"_",1,17,".png",4),12,!1),this.burntHeadTextureName1="gorilla_"+this.gorillaType+"_burnt_1.png",this.burntHeadTextureName2="gorilla_"+this.gorillaType+"_burnt_2.png",this.leftEye=new Phaser.Image(this.game,-22,-174,"texture_atlas_5","gorilla_eye.png"),this.leftEye.anchor.set(.5),this.leftEye.visible=!1,this.headSprite.addChild(this.leftEye),this.rightEye=new Phaser.Image(this.game,20,-174,"texture_atlas_5","gorilla_eye.png"),this.rightEye.anchor.set(.5),this.rightEye.visible=!1,this.headSprite.addChild(this.rightEye)}return __extends(c,b),c.prototype.update=function(){this.hasExploded&&(this.eyelidCounter>20&&this.eyelidCounter<36||this.eyelidCounter>80&&this.eyelidCounter<90||this.eyelidCounter>180&&this.eyelidCounter<190?this.headSprite.frameName=this.burntHeadTextureName1:this.headSprite.frameName=this.burntHeadTextureName2,this.eyelidCounter++,this.eyelidCounter=this.eyelidCounter<200?this.eyelidCounter+1:0)},c.prototype.hit=function(b){if(b=b||!1,!b){var c=this.gorillaType===a.Gorilla.MALE?-5:5;this.headTween=this.game.add.tween(this).to({y:c},125,Phaser.Easing.Cubic.Out,!0,0,0,!0)}this.gorilla.oppositeGorilla.checkGorillaState();var d=this.headSprite.animations.play("eat",38);d.onComplete.add(function(){this.gorilla.checkGorillaState()},this)},c.prototype.scare=function(){var a=this.headSprite.animations.play("scared",14);a.onComplete.add(this.startEyesTweening,this)},c.prototype.scareAfterExplosion=function(){var a=this.headSprite.animations.play("scared",14);a.onComplete.add(function(){this.leftEye.visible=!0,this.rightEye.visible=!0},this)},c.prototype.freezeScared=function(){this.stopEyesTweening()},c.prototype.addSweat=function(){var a=new Phaser.Sprite(this.game,0,0,"texture_atlas_5","gorilla_sweat_0001.png");a.animations.add("sweatting",Phaser.Animation.generateFrameNames("gorilla_sweat_",1,13,".png",4),14,!1),a.anchor.set(.5,1),a.play("sweatting",12),this.gorilla.shrunken&&a.scale.setTo(1.16,1.16),this.add(a)},c.prototype.idle=function(){this.headSprite.frameName=this.gorillaType+"_eating_0030.png",this.stopEyesTweening()},c.prototype.explode=function(){this.stopEyesTweening(),this.headSprite.frameName=this.burntHeadTextureName1,this.hasExploded=!0},c.prototype.bananaOutOfBoundsAnimation=function(){if(this.headSprite.animations.play("out-of-bounds",12,!0),a.GameVars.getInstance().gameOverFaceDirection){var b=this.headSprite.scale.x,c=this.headSprite.scale.y;this.headSprite.scale.set(-b,c)}},c.prototype.shrink=function(){this.hit(!1),this.game.add.tween(this.headSprite.scale).to({x:1.45,y:1.45},700,Phaser.Easing.Bounce.In,!0,150),this.game.add.tween(this.headSprite).to({y:50},1e3,Phaser.Easing.Cubic.Out,!0,150)},c.prototype.stretch=function(){this.hit(!0),this.game.add.tween(this.headSprite.scale).to({x:1,y:1},600,Phaser.Easing.Bounce.Out,!0,150),this.game.add.tween(this.headSprite).to({y:0},1e3,Phaser.Easing.Cubic.Out,!0,150)},c.prototype.onLevelPassed=function(){this.headSprite.y=-60,this.leftEye.visible&&(this.leftEye.visible=!1,this.rightEye.visible=!1,this.leftEyeTween.pendingDelete=!0,this.rightEyeTween.pendingDelete=!0),this.headTween&&(this.headTween.pendingDelete=!0),this.headSprite.animations.play("victory",12,!0)},c.prototype.startEyesTweening=function(){this.leftEye.visible=!0,this.leftEyeTween&&(this.leftEyeTween.pendingDelete=!0),this.leftEyeTween=this.game.add.tween(this.leftEye.scale).to({x:1.35,y:1.35},200,Phaser.Easing.Cubic.Out,!0,0,-1,!0),this.rightEye.visible=!0,this.rightEyeTween&&(this.rightEyeTween.pendingDelete=!0),this.rightEyeTween=this.game.add.tween(this.rightEye.scale).to({x:1.35,y:1.35},200,Phaser.Easing.Cubic.Out,!0,0,-1,!0)},c.prototype.stopEyesTweening=function(){this.leftEye.visible=!1,this.leftEyeTween&&(this.leftEyeTween.pendingDelete=!0),this.rightEye.visible=!1,this.rightEyeTween&&(this.rightEyeTween.pendingDelete=!0)},c}(Phaser.Group);a.GorillaHead=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(a){function b(c){a.call(this,c,null,"smoke-effect",!1),this.horizontalDirection=1,this.verticalDirection=-1,this.y=-95,this.visible=!1;for(var d,e=0;e<b.SMOKE_CLOUDS_NUMBER;e++)d=this.create(0,0,"texture_atlas_1","pink_smoke.png"),d.anchor.set(.5)}return __extends(b,a),b.prototype.emit=function(){this.visible=!0,this.forEach(this.emitSmokeParticle,this)},b.prototype.emitSmokeParticle=function(a){a.x=0,a.y=0,a.scale.set(0),a.alpha=1,a.angle=360*Math.random(),this.game.add.tween(a).to({x:150*this.horizontalDirection,y:35*this.verticalDirection},300,Phaser.Easing.Cubic.Out,!0),this.horizontalDirection=-this.horizontalDirection,a.z%2===0&&(this.verticalDirection=-this.verticalDirection),this.game.add.tween(a.scale).to({x:2,y:2},300,Phaser.Easing.Cubic.Out,!0);var c=this.game.add.tween(a).to({alpha:0},200,Phaser.Easing.Cubic.Out,!0,200);a.z===b.SMOKE_CLOUDS_NUMBER&&c.onComplete.add(function(){this.visible=!1},this)},b.SMOKE_CLOUDS_NUMBER=4,b}(Phaser.Group);a.PinkBananaSmokeEffect=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(){function b(){}return b.getInstance=function(){return null===b._instance&&(b._instance=new b),b._instance},b.prototype.init=function(b){this.game=b,a.GameVars.getInstance().gameStage=a.GameConstants.EASY_STAGE,a.GameConstants.DEVELOPMENT&&(a.GameVars.getInstance().gameRound=a.GameConstants.FIRST_ROUND,a.GameVars.getInstance().gameStage=a.GameConstants.DIFFICULT_STAGE)},b.prototype.onNewGame=function(b){this.gameController=b.gameController,this.maleGorilla=b.maleGorilla,this.femaleGorilla=b.femaleGorilla,this.bananaThrower=b.bananaThrower,this.hud=b.hud,this.backgroundManager=b.backgroundManager,this.gameState=b,this.i=0,a.GameVars.getInstance().stagePassed=!1,a.GameVars.getInstance().bananaInScene=!1,a.GameVars.getInstance().hitsMaleGorilla=0,a.GameVars.getInstance().hitsFemaleGorilla=0,a.GameVars.getInstance().gameOver=!1,a.GameVars.getInstance().isNextDynamite=!1,a.GameVars.getInstance().bananas=a.GameConstants.BANANAS_NUMBER,a.GameVars.getInstance().gameStage!==a.GameConstants.DIFFICULT_STAGE?a.GameVars.getInstance().stageData=a.LevelFactory.getInstance().getLevel():a.GameVars.getInstance().stageData=null,a.GameVars.getInstance().gameOverFaceDirection=!a.GameVars.getInstance().gameOverFaceDirection},b.prototype.onClickInGameScene=function(){a.GameVars.getInstance().gameStage===a.GameConstants.DIFFICULT_STAGE?this.onClickInGameSceneDifficult():this.onClickInGameSceneEasyMedium()},b.prototype.onGorillaHit=function(b,c){if(!b.gorillaHit){b.gorillaHit=!0,this.bananaThrower.resetBanana(b),a.GameVars.getInstance().bananaInScene=!1;var d=c.parent;b.name===a.GameConstants.BANANA||b.name===a.GameConstants.PINK_BANANA?(d.gorillaType===a.Gorilla.MALE?a.GameVars.getInstance().hitsMaleGorilla++:a.GameVars.getInstance().hitsFemaleGorilla++,d.changeDisguise(b.name===a.GameConstants.PINK_BANANA),b.name===a.GameConstants.PINK_BANANA?d.shrunken?d.hit():d.shrink():d.shrunken?d.stretch():d.hit(),this.hasLevelBeenPassed()?this.onLevelPassed():this.increaseTempo()):b.name===a.GameConstants.DYNAMITE&&(a.GameModel.getInstance().onStageNotPassed(),this.bananaThrower.stopSpinning(),this.gameController.onEndLevel(),this.game.time.events.add(150,this.explodeDynamite,this,[d,b]),this.game.time.events.add(2500,function(){this.gameState.onEndLevel()},this))}},b.prototype.onBananaOutOfBounds=function(b){a.GameVars.getInstance().gameOver||b.gorillaHit||(a.GameVars.getInstance().bananaInScene=!1,b.name===a.GameConstants.BANANA||b.name===a.GameConstants.PINK_BANANA?(a.GameVars.getInstance().gameOver=!0,a.GameVars.getInstance().stagePassed=!1,this.bananaThrower.stopSpinning(),this.gameController.onEndLevel(),this.gameState.onEndLevel(),a.GameModel.getInstance().onStageNotPassed()):b.name===a.GameConstants.DYNAMITE&&(this.bananaThrower.resetBanana(b,!0),this.hasLevelBeenPassed()?this.onLevelPassed():(a.GameVars.getInstance().gameRound===a.GameConstants.FIRST_ROUND&&this.increaseTempo(),a.GameVars.getInstance().gameStage!==a.GameConstants.DIFFICULT_STAGE&&(this.femaleGorilla.onNextBanana(),this.maleGorilla.onNextBanana()))))},b.prototype.explodeDynamite=function(b){a.GameVars.getInstance().explosions++;var c=b[0],d=b[1];c.explode(),c.oppositeGorilla.freezeScared(),d.kill(),a.GameVars.getInstance().gameStage!==a.GameConstants.EASY_STAGE&&a.GameVars.getInstance().gameStage!==a.GameConstants.MEDIUM_STAGE||(this.maleGorilla.stopTrembling(),this.femaleGorilla.stopTrembling()),a.GameVars.getInstance().gameStage!==a.GameConstants.MEDIUM_STAGE&&a.GameVars.getInstance().gameStage!==a.GameConstants.DIFFICULT_STAGE||(this.maleGorilla.stopMoving(),this.femaleGorilla.stopMoving()),this.gameState.onExplosion()},b.prototype.onLevelPassed=function(){a.GameVars.getInstance().stagePassed=!0,a.GameModel.getInstance().onStagePassed(),this.gameController.onEndLevel(),this.gameState.onLevelPassed()},b.prototype.onLoseLevelPressed=function(){this.bananaThrower.stopSpinning(),this.gameController.onEndLevel(),this.gameState.onEndLevel(),a.GameModel.getInstance().onStageNotPassed()},b.prototype.onClickInGameSceneEasyMedium=function(){a.GameVars.getInstance().bananaInScene=!0,a.GameVars.getInstance().bananas--,a.GameVars.getInstance().isNextDynamite?(a.GameVars.getInstance().isNextDynamite=!1,this.bananaThrower.throwDeterminedItem(a.GameConstants.DYNAMITE),this.hud.onNextBanana()):(a.GameVars.getInstance().stageData[this.i]===a.GameConstants.B?this.bananaThrower.throwDeterminedItem(a.GameConstants.BANANA):a.GameVars.getInstance().stageData[this.i]===a.GameConstants.P&&this.bananaThrower.throwDeterminedItem(a.GameConstants.PINK_BANANA),a.GameVars.getInstance().totalBananasThrown++),this.i++,this.isNextLaunchDynamite()?(a.GameVars.getInstance().isNextDynamite=!0,this.bananaThrower.onNextDynamite(),this.hud.onNextDynamite()):a.GameVars.getInstance().isNextDynamite=!1,this.hud.onBananaThrown()},b.prototype.onClickInGameSceneDifficult=function(){a.GameVars.getInstance().bananas--,this.bananaThrower.throwUndeterminedItem(),this.hud.onBananaThrown()},b.prototype.isNextLaunchDynamite=function(){return a.GameVars.getInstance().stageData[this.i]===a.GameConstants.D},b.prototype.increaseTempo=function(){a.GameVars.getInstance().gameRound===a.GameConstants.FIRST_ROUND&&(a.GameVars.getInstance().gameStage!==a.GameConstants.MEDIUM_STAGE&&a.GameVars.getInstance().gameStage!==a.GameConstants.DIFFICULT_STAGE||(this.maleGorilla.increaseHorizontalSpeed(),this.femaleGorilla.increaseHorizontalSpeed()),this.bananaThrower.increaseSpeed()),a.GameVars.getInstance().bananas>4&&a.GameVars.getInstance().bananas%4===0&&a.GameState.currentInstance.changeAudioLoop()},b.prototype.hasLevelBeenPassed=function(){var b=!1;return 0===a.GameVars.getInstance().bananas&&(b=!0),b},b._instance=null,b}();a.LevelManager=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(a){b.call(this,a,null,"banana splash",!1),this.rotating=!1,this.dataLength=180,this.stopRotating=!1,this.trigonometryData=Phaser.Math.sinCosGenerator(this.dataLength,0,1,2),this.bananaX=new Array,this.bananaY=new Array;for(var c=0;c<this.dataLength;c++)this.bananaX[c]=Math.round(240+165*this.trigonometryData.cos[c]),this.bananaY[c]=Math.round(320+240*this.trigonometryData.sin[c]);this.i=0,this.bananaImage_2=new Phaser.Image(this.game,this.bananaX[0],-100,"texture_atlas_1","banana.png"),this.bananaImage_2.anchor.setTo(.5,.5),this.bananaImage_2.alpha=.15,this.add(this.bananaImage_2),this.bananaImage_1=new Phaser.Image(this.game,this.bananaX[0],-100,"texture_atlas_1","banana.png"),this.bananaImage_1.anchor.setTo(.5,.5),this.bananaImage_1.alpha=.35,this.add(this.bananaImage_1),this.bananaImage_0=new Phaser.Image(this.game,this.bananaX[0],-100,"texture_atlas_1","banana.png"),this.bananaImage_0.anchor.setTo(.5,.5),this.add(this.bananaImage_0),this.bananaImage_0.inputEnabled=!0,this.bananaImage_0.events.onInputDown.add(this.onTapBanana,this)}return __extends(c,b),c.prototype.update=function(){if(b.prototype.update.call(this),this.rotating){this.i=this.i<this.dataLength-1?this.i+1:0;var c=this.i-1>0?this.i-1:this.dataLength-1,d=c-1>0?c-1:this.dataLength-2;this.bananaImage_2.x=this.bananaX[d],this.bananaImage_2.y=this.bananaY[d],this.bananaImage_1.x=this.bananaX[c],this.bananaImage_1.y=this.bananaY[c],this.bananaImage_0.x=this.bananaX[this.i],this.bananaImage_0.y=this.bananaY[this.i],105===this.i&&a.SplashState.currentInstance.tweenTitle(),100===this.i&&this.stopRotating&&(this.rotating=!1)}},c.prototype.appear=function(){this.game.add.tween(this.bananaImage_0).to({y:this.bananaY[0]},750,Phaser.Easing.Linear.None,!0,1e3).onComplete.add(function(){this.rotating=!0},this)},c.prototype.disappear=function(){this.stopRotating=!0},c.prototype.onTapBanana=function(){"banana.png"===this.bananaImage_0.frameName?(this.bananaImage_0.frameName="pink-banana.png",this.bananaImage_1.frameName="pink-banana.png",this.bananaImage_2.frameName="pink-banana.png"):(this.bananaImage_0.frameName="banana.png",this.bananaImage_1.frameName="banana.png",this.bananaImage_2.frameName="banana.png")},c}(Phaser.Group);a.BananaSplash=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c,d,e){b.call(this,c,null,"end-level-gorilla",!1),this.slidingItemsContainer=e,d==a.GameConstants.FIRST_ROUND?this.addFirstRoundGorilla():this.addSecondRoundGorilla()}return __extends(c,b),c.prototype.destroy=function(){a.AudioManager.getInstance().stopSound("Monaexcitada3",!1,!0)},c.prototype.addFirstRoundGorilla=function(){this.x=240;var b=this.create(0,0,"texture_atlas_6");if(b.anchor.setTo(.5,1),a.GameVars.getInstance().stagePassed)b.y=65,b.animations.add("victory",Phaser.Animation.generateFrameNames("victory_",1,24,".png",4),12,!1),b.animations.play("victory",12,!0),this.addRays(),0===this.slidingItemsContainer.x&&a.AudioManager.getInstance().playSound("Monaexcitada3",!0);else{var d;d=c.isDefeatedGorillaFemale?"gameover_female_":"gameover_male_",c.isDefeatedGorillaFemale=!c.isDefeatedGorillaFemale,b.y=120,b.animations.add("sufre-mamon",Phaser.Animation.generateFrameNames(d,1,16,".png",4),12,!1),b.animations.play("sufre-mamon",12,!0)}},c.prototype.reverseRaysTween=function(){this.raysTweenDirection?(this.game.add.tween(this.rays.scale).to({x:.7,y:.7},2250,Phaser.Easing.Cubic.In,!0),this.game.add.tween(this.rays).to({alpha:.15},2250,Phaser.Easing.Cubic.In,!0).onComplete.add(this.reverseRaysTween,this)):(this.game.add.tween(this.rays.scale).to({x:1,y:1},350,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.rays).to({alpha:.75},350,Phaser.Easing.Cubic.Out,!0).onComplete.add(this.reverseRaysTween,this)),this.raysTweenDirection=!this.raysTweenDirection},c.prototype.addSecondRoundGorilla=function(){this.x=720;var b=this.create(0,74,"texture_atlas_1","cuerpo_buddha.png");b.anchor.setTo(.5,1);var c=a.GameVars.getInstance().stagePassed?"cabeza_buddha_win.png":"cabeza_buddha_lose.png";a.GameVars.getInstance().stagePassed?(c="cabeza_buddha_win.png",this.addRays()):c="cabeza_buddha_lose.png";var d=new Phaser.Image(this.game,0,0,"texture_atlas_1",c);d.anchor.setTo(.5,1),b.addChild(d),this.game.add.tween(b).to({y:70},1250,Phaser.Easing.Cubic.Out,!0,0,-1,!0),0!=this.slidingItemsContainer.x&&(a.GameVars.getInstance().stagePassed?a.AudioManager.getInstance().playSound("ping"):a.AudioManager.getInstance().playSound("gong"))},c.prototype.addRays=function(){this.raysTweenDirection=!1,this.rays=this.slidingItemsContainer.create(this.x,-20,"texture_atlas_5","celestial_rays.png"),this.slidingItemsContainer.sendToBack(this.rays),this.rays.blendMode=3,this.rays.alpha=.75,this.rays.anchor.setTo(.5,.5),this.game.add.tween(this.rays.scale).to({x:.7,y:.7},2e3,Phaser.Easing.Cubic.In,!0),this.game.add.tween(this.rays).to({alpha:.25},2e3,Phaser.Easing.Cubic.In,!0).onComplete.add(this.reverseRaysTween,this)},c.isDefeatedGorillaFemale=!0,c}(Phaser.Group);a.EndLevelGorilla=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c,d,e,f){switch(b.call(this,c,null,"level-button",!1),f?this.splash=f:this.splash=!1,this.gameStage=d,this.round=e,this.shakeButton=!1,this.gameStage){case a.GameConstants.EASY_STAGE:this.stageIndex=0,this.textureOff="play_easy_off.png",this.textureOn="play_easy_on.png",this.textureImage="play_medio_blocked.png",this.buttonType=a.GameConstants.EASY_STAGE;break;case a.GameConstants.MEDIUM_STAGE:this.stageIndex=1,this.textureOff="play_medium_off.png",this.textureOn="play_medium_on.png",this.textureImage="play_medio_blocked.png",this.buttonType=a.GameConstants.MEDIUM_STAGE;break;case a.GameConstants.DIFFICULT_STAGE:this.stageIndex=2,this.textureOff="play_difficult_off.png",this.textureOn="play_difficult_on.png",this.textureImage="play_dificil_blocked.png",this.buttonType=a.GameConstants.DIFFICULT_STAGE}e===a.GameConstants.SECOND_ROUND&&(this.stageIndex+=3),a.GameVars.getInstance().stagesState[this.stageIndex]!==a.GameVars.getInstance().previousStagesState[this.stageIndex]?this.addShakingButton():a.GameVars.getInstance().stagesState[this.stageIndex]?this.addButton():this.addImageAndNumber()}return __extends(c,b),c.prototype.update=function(){this.shakeButton&&(Math.random()>.15?(this.shakingButton.x=this.shakingAmplitude-2*Math.random()*this.shakingAmplitude,this.shakingButton.y=this.shakingAmplitude-2*Math.random()*this.shakingAmplitude,this.shakingButton.angle=this.shakingAmplitude-2*Math.random()*this.shakingAmplitude,this.shakingButton.blendMode=0,this.shakingButton.alpha=1,this.shakingButtonImageBehind.x=this.shakingAmplitude-2*Math.random()*this.shakingAmplitude,this.shakingButtonImageBehind.y=this.shakingAmplitude-2*Math.random()*this.shakingAmplitude,this.shakingButtonImageBehind.angle=this.shakingAmplitude-2*Math.random()*this.shakingAmplitude):(this.shakingButton.blendMode=3,this.shakingButton.alpha=.5))},c.prototype.addShakingButton=function(){
this.shakeButton=!0,this.shakingButtonImageBehind=new Phaser.Image(this.game,0,0,"texture_atlas_2",this.textureOff),this.shakingButtonImageBehind.anchor.set(.5),this.add(this.shakingButtonImageBehind),this.shakingButton=new Phaser.Button(this.game,0,0,"texture_atlas_2",this.onClickPlay,this,this.textureOn,this.textureOff,this.textureOn),this.shakingButton.anchor.set(.5),this.shakingButton.name=a.GameConstants.EASY_STAGE,this.add(this.shakingButton),this.shakingButton.alpha=.85,this.shakingButton.blendMode=3,this.shakingButtonImageBehind.alpha=.75,this.shakingButtonImageBehind.scale.setTo(.95,.95),this.shakingAmplitude=3,this.chain=new Phaser.Image(this.game,0,0,"texture_atlas_1","chain_blocked.png"),this.gameStage===a.GameConstants.EASY_STAGE&&this.chain.scale.setTo(.9,.8),this.chain.anchor.set(.5),this.shakingButton.addChild(this.chain),this.game.time.events.add(2400,this.stopButtonShaking,this),this.game.time.events.add(1e3,function(){a.AudioManager.getInstance().playSound("button-trembling")},this)},c.prototype.stopButtonShaking=function(){this.chain.blendMode=3,this.game.add.tween(this.chain.scale).to({x:1.2,y:1.2},800,Phaser.Easing.Cubic.Out,!0,400),this.game.add.tween(this.chain).to({alpha:0},800,Phaser.Easing.Cubic.Out,!0,400).onComplete.add(function(){this.chain.destroy()},this),this.game.add.tween(this).to({shakingAmplitude:0},1e3,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.shakeButton=!1,this.shakingButton.x=0,this.shakingButton.y=0,this.shakingButton.angle=0,this.shakingButton.blendMode=0,this.shakingButton.alpha=1,this.shakingButtonImageBehind.destroy()},this),a.AudioManager.getInstance().playSound("lock-breaking")},c.prototype.addButton=function(){var b=new Phaser.Button(this.game,0,0,"texture_atlas_2",this.onClickPlay,this,this.textureOn,this.textureOff,this.textureOn);b.anchor.set(.5),b.name=a.GameConstants.EASY_STAGE,this.add(b)},c.prototype.addImageAndNumber=function(){var b=this.create(0,0,"texture_atlas_2",this.textureImage);b.anchor.set(.5);var d,c=this.stageIndex-1;d=a.GameVars.getInstance().stagesState[c]?a.GameVars.getInstance().bestResultNotPassedLevel.toString()+"/32":"-/32";var e=new Phaser.BitmapText(this.game,125,-15,"victor-white",d,60);e.x-=e.width/2,this.buttonType===a.GameConstants.MEDIUM_STAGE?e.tint=14482175:(e.tint=1518410,e.y=-20),e.scale.set(.4,1),b.addChild(e)},c.prototype.onClickPlay=function(){this.shakeButton||(this.splash?a.SplashState.currentInstance.onClickPlay(this.gameStage,this.round):a.GameState.currentInstance.onClickPlay(this.gameStage,this.round),a.AudioManager.getInstance().playSound("click"))},c}(Phaser.Group);a.StageButton=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(d){b.call(this,d,null,"end-level-columns",!1),this.sliding=!1,this.secondRoundAccessible=a.GameVars.getInstance().stagesState[3],this.slidingItemsContainer=new Phaser.Group(this.game),this.slidingItemsContainer.y=c.BOTTOM_PY,this.add(this.slidingItemsContainer),this.firstRoundButton=new Phaser.Button(this.game,30,250,"texture_atlas_2",this.onClickShowFirstRoundButton,this,"next_column_on.png","next_column_off.png","next_column_on.png"),this.firstRoundButton.angle=180,this.firstRoundButton.anchor.set(.5),this.add(this.firstRoundButton);var e=new Phaser.Group(this.game);if(this.add(e),this.secondRoundButton=new Phaser.Button(this.game,450,250,"texture_atlas_2",this.onClickShowSecondRoundButton,this,"next_column_on.png","next_column_off.png","next_column_on.png"),this.secondRoundButton.anchor.setTo(.5),e.add(this.secondRoundButton),this.secondRoundAccessible)this.slidingItemsContainer.x=-480,this.secondRoundButton.visible=!1;else{this.firstRoundButton.visible=!1,this.secondRoundButton.alpha=.5;var f=new Phaser.Image(this.game,410,272,"texture_atlas_2","lock.png");f.angle=-30,e.addChild(f)}this.addColumns(),this.addGorillas(),this.addButtons(),this.game.add.tween(this.slidingItemsContainer).to({y:c.TOP_PY},850,Phaser.Easing.Cubic.Out,!0,400).onComplete.add(function(){a.GameModel.getInstance().onEndLevelLayerMounted()},this)}return __extends(c,b),c.prototype.addColumns=function(){var a=this.slidingItemsContainer.create(240,0,"texture_atlas_4","splash_columna.png");a.anchor.set(.5,0),this.secondRoundAccessible&&(a=this.slidingItemsContainer.create(720,0,"texture_atlas_4","splash_columna_segunda_ronda.png"),a.anchor.set(.5,0))},c.prototype.addGorillas=function(){var b=new a.EndLevelGorilla(this.game,a.GameConstants.FIRST_ROUND,this.slidingItemsContainer);this.slidingItemsContainer.add(b),this.secondRoundAccessible&&(b=new a.EndLevelGorilla(this.game,a.GameConstants.SECOND_ROUND,this.slidingItemsContainer),this.slidingItemsContainer.add(b))},c.prototype.addButtons=function(){var b=new a.StageButton(this.game,a.GameConstants.EASY_STAGE,a.GameConstants.FIRST_ROUND);b.x=240,b.y=185,this.slidingItemsContainer.add(b);var c=new a.StageButton(this.game,a.GameConstants.MEDIUM_STAGE,a.GameConstants.FIRST_ROUND);c.x=240,c.y=285,this.slidingItemsContainer.add(c);var d=new a.StageButton(this.game,a.GameConstants.DIFFICULT_STAGE,a.GameConstants.FIRST_ROUND);if(d.x=240,d.y=400,this.slidingItemsContainer.add(d),this.secondRoundAccessible){var e=new a.StageButton(this.game,a.GameConstants.EASY_STAGE,a.GameConstants.SECOND_ROUND);e.x=720,e.y=185,this.slidingItemsContainer.add(e);var f=new a.StageButton(this.game,a.GameConstants.MEDIUM_STAGE,a.GameConstants.SECOND_ROUND);f.x=720,f.y=285,this.slidingItemsContainer.add(f);var g=new a.StageButton(this.game,a.GameConstants.DIFFICULT_STAGE,a.GameConstants.SECOND_ROUND);g.x=720,g.y=400,this.slidingItemsContainer.add(g)}},c.prototype.onClickShowSecondRoundButton=function(){!this.sliding&&a.GameVars.getInstance().stagesState[3]&&(this.firstRoundButton.visible=!0,this.secondRoundButton.visible=!1,this.sliding=!0,this.game.add.tween(this.slidingItemsContainer).to({x:-480},1e3,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.sliding=!1},this))},c.prototype.onClickShowFirstRoundButton=function(){this.sliding||(this.firstRoundButton.visible=!1,this.secondRoundButton.visible=!0,this.sliding=!0,this.game.add.tween(this.slidingItemsContainer).to({x:0},1e3,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.sliding=!1},this))},c.TOP_PY=180,c.BOTTOM_PY=825,c}(Phaser.Group);a.EndLevelColumns=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c){b.call(this,c,null,"end score",!1),this.x=410,this.y=-65;var d=a.GameConstants.BANANAS_NUMBER-a.GameVars.getInstance().bananas-1;d<0&&(d=0);var g,e=Math.floor(d/10),f=d-10*e,h="points_0"+e.toString()+".png";0!=e?(this.tensImage=new Phaser.Image(this.game,-24,0,"texture_atlas_5",h),this.tensImage.x-=this.tensImage.width/2,this.tensImage.y-=this.tensImage.height/2,this.add(this.tensImage),g=30):(this.tensImage=null,g=0);var i="points_0"+f.toString()+".png";this.unitsImage=new Phaser.Image(this.game,g,-4,"texture_atlas_5",i),this.unitsImage.x-=this.unitsImage.width/2,this.unitsImage.y-=this.unitsImage.height/2,this.add(this.unitsImage),this.game.add.tween(this).to({y:65},600,Phaser.Easing.Cubic.Out,!0,450).onComplete.add(this.animateNumbers,this)}return __extends(c,b),c.prototype.animateNumbers=function(){null!=this.tensImage&&this.game.add.tween(this.tensImage).to({x:this.tensImage.x+2,y:this.tensImage.y-8},750,Phaser.Easing.Quadratic.Out,!0,0,-1,!0),this.game.add.tween(this.unitsImage).to({x:this.unitsImage.x-2,y:this.unitsImage.y+8},750,Phaser.Easing.Quadratic.Out,!0,0,-1,!0)},c}(Phaser.Group);a.EndScore=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(a){function b(c){a.call(this,c,null,"game title",!1);for(var d,e,f,g,h=1;h<12;h++)d="splash_letter_"+h+"_bold.png",e=b.TITLE_PX[h-1],f=0,g=new Phaser.Image(this.game,e,f,"texture_atlas_5",d),g.anchor.setTo(.5,.5),this.add(g);for(h=1;h<12;h++)d="splash_letter_"+h+".png",e=b.TITLE_PX[h-1],f=0,g=new Phaser.Image(this.game,e,f,"texture_atlas_5",d),g.anchor.setTo(.5,.5),this.add(g)}return __extends(b,a),b.prototype.tweenCharacters=function(){for(var a,b,c=0;c<this.length/2;c++)a=this.getChildAt(c),b=this.getChildAt(11+c),this.game.add.tween(a.scale).to({y:-1},400,Phaser.Easing.Cubic.In,!1,50*c).to({y:1},300,Phaser.Easing.Cubic.Out).start(),this.game.add.tween(b.scale).to({y:-1},400,Phaser.Easing.Cubic.In,!1,50*c).to({y:1},300,Phaser.Easing.Cubic.Out).start()},b.TITLE_PX=[0,44,84,120,160,200,247,288,328,357,384],b}(Phaser.Group);a.GameTitle=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c){b.call(this,c,null,"gorilla splash",!1),this.y=800,this.chestAnimationTimerEvent=null,this.movePupils=!1;var d;a.GameVars.getInstance().stagesState[3]?(d="splash_columna_segunda_ronda.png",this.addBuddha()):(d="splash_columna.png",this.addGorilla()),this.column=this.create(240,1655,"texture_atlas_4",d),this.column.anchor.setTo(.5,1),this.sendToBack(this.column)}return __extends(c,b),c.prototype.destroy=function(){null!=this.chestAnimationTimerEvent&&(this.chestAnimationTimerEvent.pendingDelete=!0),b.prototype.destroy.call(this)},c.prototype.update=function(){b.prototype.update.call(this),this.movePupils&&(this.leftPupil.x=this.leftPupilX[this.banana.i],this.leftPupil.y=this.leftPupilY[this.banana.i],this.rightPupil.x=this.leftPupil.x+c.PUPIL_DELTA_X,this.rightPupil.y=this.leftPupil.y)},c.prototype.appear=function(b){this.game.add.tween(this).to({y:250},c.COLUMN_DEPLOYEMENT_TIME,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){a.SplashState.currentInstance.onColumnDeployed()},this),this.game.time.events.add(1.25*c.COLUMN_DEPLOYEMENT_TIME,function(){a.SplashState.currentInstance.fadeShaking()},this),a.GameVars.getInstance().stagesState[3]||(this.banana=b,this.initPupilsTrajectory(this.banana),this.movePupils=!0,this.chestAnimationTimerEvent=this.game.time.events.add(3800,this.chestAnimation,this))},c.prototype.addGorilla=function(){this.gorilla=this.create(240,-5,"texture_atlas_4","splash_0001.png"),this.gorilla.anchor.setTo(.5,.5),this.gorilla.animations.add("chest",Phaser.Animation.generateFrameNames("splash_",1,25,".png",4),14,!1),this.leftPupil=new Phaser.Sprite(this.game,0,0,this.game.cache.getBitmapData("black_square")),this.leftPupil.anchor.setTo(.5,.5),this.leftPupil.scale.setTo(.07,.07),this.add(this.leftPupil),this.rightPupil=new Phaser.Sprite(this.game,0,0,this.game.cache.getBitmapData("black_square")),this.rightPupil.anchor.setTo(.5,.5),this.rightPupil.scale.setTo(.07,.07),this.add(this.rightPupil),this.leftPupil.visible=!1,this.rightPupil.visible=!1,this.i=0},c.prototype.addBuddha=function(){var a=this.create(240,80,"texture_atlas_1","cuerpo_buddha.png");a.anchor.setTo(.5,1);var b=new Phaser.Image(this.game,0,0,"texture_atlas_1","cabeza_buddha_lose.png");b.anchor.setTo(.5,1),a.addChild(b),this.game.add.tween(a).to({y:90},1250,Phaser.Easing.Cubic.Out,!0,0,-1,!0)},c.prototype.initPupilsTrajectory=function(a){this.banana=a,this.leftPupilX=new Array,this.leftPupilY=new Array,this.dataLength=this.banana.trigonometryData.sin.length;for(var b=0;b<this.dataLength;b++)this.leftPupilX[b]=Math.round(c.LEFT_PUPIL_PX+5*this.banana.trigonometryData.cos[b]),this.leftPupilY[b]=Math.round(c.PUPIL_PY+2.15*this.banana.trigonometryData.sin[b])},c.prototype.chestAnimation=function(){this.leftPupil.visible=!1,this.rightPupil.visible=!1;var b=this.gorilla.animations.play("chest",18);null!=b&&b.onComplete.add(function(){this.leftPupil.visible=!0,this.rightPupil.visible=!0,this.gorilla.frameName="splash_0025.png"},this),this.chestAnimationTimerEvent=this.game.time.events.add(9e3*Math.random()+9e3,this.chestAnimation,this),a.SplashState.currentInstance.layerBeingShown||a.AudioManager.getInstance().playSound("Gopes_pecho")},c.prototype.blink=function(){var a=this.gorilla.animations.play("blink");a.onComplete.add(function(){this.leftPupil.visible=!0,this.rightPupil.visible=!0,this.gorilla.frameName="splash_0025.png",this.chestAnimationTimerEvent=this.game.time.events.add(4500*Math.random()+4500,this.chestAnimation,this)},this)},c.LEFT_PUPIL_PX=221.75,c.PUPIL_DELTA_X=33,c.PUPIL_PY=-39.5,c.COLUMN_DEPLOYEMENT_TIME=2500,c}(Phaser.Group);a.GorillaWithColumn=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c){b.call(this,c,null,"splash-gorillas-container",!1),this.gorillaWithColumnFirstRound=new a.GorillaWithColumn(this.game),this.add(this.gorillaWithColumnFirstRound),this.addParticleEmitters()}return __extends(c,b),c.prototype.showColumn=function(a){this.emitterRight.start(!1,3e3,0,8,!0),this.emitterLeft.start(!1,3e3,0,8,!0),this.gorillaWithColumnFirstRound.appear(a)},c.prototype.addParticleEmitters=function(){this.emitterRight=new Phaser.Particles.Arcade.Emitter(this.game,320,600,8),this.add(this.emitterRight),this.emitterRight.makeParticles("texture_atlas_1",["humo.png","cascote_01.png","cascote_02.png"]),this.emitterRight.setXSpeed(250,1200),this.emitterRight.setYSpeed(-100,1200),this.emitterRight.gravity=10,this.emitterRight.minRotation=0,this.emitterRight.maxRotation=-90,this.emitterRight.minParticleScale=1,this.emitterRight.maxParticleScale=1.5,this.emitterLeft=new Phaser.Particles.Arcade.Emitter(this.game,320,600,8),this.add(this.emitterLeft),this.emitterLeft.makeParticles("texture_atlas_1",["humo.png","cascote_01.png","cascote_02.png"]),this.emitterLeft.setXSpeed(-250,-1200),this.emitterLeft.setYSpeed(-100,700),this.emitterLeft.gravity=10,this.emitterLeft.minRotation=0,this.emitterLeft.maxRotation=90,this.emitterLeft.minParticleScale=1,this.emitterLeft.maxParticleScale=1.5},c}(Phaser.Group);a.SplashGorillasContainer=b}(bananamania||(bananamania={}));var bananamania;!function(a){var b=function(b){function c(c){b.call(this,c,null,"splash-level-buttons-container",!1),this.sliding=!1,this.slidingItemsContainer=new Phaser.Group(this.game),this.add(this.slidingItemsContainer),this.firstRoundColumn=this.slidingItemsContainer.create(240,1905,"texture_atlas_4","splash_columna.png"),this.firstRoundColumn.anchor.setTo(.5,1),this.secondRoundColumn=this.slidingItemsContainer.create(720,1905,"texture_atlas_4","splash_columna_segunda_ronda.png"),this.secondRoundColumn.anchor.setTo(.5,1),this.firstRoundColumn.visible=!1,this.secondRoundColumn.visible=!1,this.firstRoundButton=new Phaser.Button(this.game,30,800,"texture_atlas_2",this.onClickShowFirstRoundButton,this,"next_column_on.png","next_column_off.png","next_column_on.png"),this.firstRoundButton.angle=180,this.firstRoundButton.anchor.setTo(.5,.5),this.add(this.firstRoundButton);var d=new Phaser.Group(this.game);this.add(d),this.secondRoundButton=new Phaser.Button(this.game,450,800,"texture_atlas_2",this.onClickShowSecondRoundButton,this,"next_column_on.png","next_column_off.png","next_column_on.png"),this.secondRoundButton.anchor.setTo(.5,.5),d.add(this.secondRoundButton);var e=new a.StageButton(this.game,a.GameConstants.EASY_STAGE,a.GameConstants.FIRST_ROUND,!0);e.x=240,e.y=685,this.slidingItemsContainer.add(e);var f=new a.StageButton(this.game,a.GameConstants.MEDIUM_STAGE,a.GameConstants.FIRST_ROUND,!0);f.x=240,f.y=805,this.slidingItemsContainer.add(f);var g=new a.StageButton(this.game,a.GameConstants.DIFFICULT_STAGE,a.GameConstants.FIRST_ROUND,!0);g.x=240,g.y=925,this.slidingItemsContainer.add(g);var h=new a.StageButton(this.game,a.GameConstants.EASY_STAGE,a.GameConstants.SECOND_ROUND,!0);h.x=720,h.y=685,this.slidingItemsContainer.add(h);var i=new a.StageButton(this.game,a.GameConstants.MEDIUM_STAGE,a.GameConstants.SECOND_ROUND,!0);i.x=720,i.y=805,this.slidingItemsContainer.add(i);var j=new a.StageButton(this.game,a.GameConstants.DIFFICULT_STAGE,a.GameConstants.SECOND_ROUND,!0);if(j.x=720,j.y=925,this.slidingItemsContainer.add(j),a.GameVars.getInstance().stagesState[3])this.firstRoundButton.visible=!0,this.secondRoundButton.visible=!1,this.slidingItemsContainer.x=-480;else{this.firstRoundButton.visible=!1,this.secondRoundButton.visible=!0,this.firstRoundButton.alpha=.3,this.secondRoundButton.alpha=.3;var k=new Phaser.Image(this.game,410,822,"texture_atlas_2","lock.png");k.angle=-30,d.addChild(k)}}return __extends(c,b),c.prototype.appear=function(){this.firstRoundColumn.visible=!0,this.secondRoundColumn.visible=!0},c.prototype.onClickShowSecondRoundButton=function(){!this.sliding&&a.GameVars.getInstance().stagesState[3]&&(this.firstRoundButton.visible=!0,this.secondRoundButton.visible=!1,this.sliding=!0,this.game.add.tween(this.slidingItemsContainer).to({x:-480},1e3,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.sliding=!1},this))},c.prototype.onClickShowFirstRoundButton=function(){this.sliding||(this.firstRoundButton.visible=!1,this.secondRoundButton.visible=!0,this.sliding=!0,this.game.add.tween(this.slidingItemsContainer).to({x:0},1e3,Phaser.Easing.Cubic.Out,!0).onComplete.add(function(){this.sliding=!1},this))},c}(Phaser.Group);a.SplashLevelButtonsContainer=b}(bananamania||(bananamania={}));var Utils;!function(a){var b;!function(a){var b=function(a){function b(b,c){a.call(this,b,c),this.patchLoader()}return __extends(b,a),b.prototype.patchLoader=function(){Object.defineProperty(Phaser.Loader,"cacheBuster",{value:null}),Phaser.Loader.prototype.transformUrl=function(a,b){return a?(null!==this.cacheBuster&&null===a.match(/^(data:)/)&&(a+="?v="+this.cacheBuster),a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?a:this.baseURL+b.path+a):""}},b}(Phaser.Plugin);a.CacheBuster=b}(b=a.Plugins||(a.Plugins={}))}(Utils||(Utils={}));